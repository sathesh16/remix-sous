{
  "version": 3,
  "sources": ["../../../app/routes/login/index.jsx"],
  "sourcesContent": ["import { json, redirect } from \"@remix-run/node\";\nimport { Form, useActionData, useTransition } from \"@remix-run/react\";\n// import { getSession, commitSession } from \"~/sessions.server\";\nimport { useEffect } from \"react\";\n\nexport async function action({ request }) {\n    const formData = await request.formData();\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n\n    try {\n        const response = await fetch(\"http://192.168.1.51:8056/auth/login\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ email, password }),\n        });\n\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"\u274C Login failed:\", errorText);\n            return json({ error: \"Invalid email or password\" }, { status: 401 });\n        }\n\n        const apiData = await response.json();\n        const userData = apiData.data.data;\n\n        const session = await getSession(request);\n        session.set(\"user\", userData);\n\n        return redirect(\"/dashboard\", {\n            headers: {\n                \"Set-Cookie\": await commitSession(session),\n            },\n        });\n    } catch (error) {\n        console.error(\"\uD83D\uDCA5 Login failed:\", error);\n        return json({ error: \"Server error. Try again later.\" }, { status: 500 });\n    }\n}\n\nexport default function Login() {\n    const actionData = useActionData();\n    const transition = useTransition();\n\n    useEffect(() => {\n        if (actionData?.error) {\n            alert(actionData.error); // You can replace this with toast later\n        }\n    }, [actionData]);\n\n    const isSubmitting = transition.state === \"submitting\";\n\n    return (\n        <div className=\"login-page\">\n            <h2>Login</h2>\n            <Form method=\"post\">\n                <label>Email:</label>\n                <input type=\"email\" name=\"email\" required />\n                <label>Password:</label>\n                <input type=\"password\" name=\"password\" required />\n\n                <button type=\"submit\" disabled={isSubmitting}>\n                    {isSubmitting ? \"Logging in...\" : \"Login\"}\n                </button>\n            </Form>\n        </div>\n    );\n}\n"],
  "mappings": ";;;;;;;;;;;;AAGA,IAAAA,gBAA0B;AAmDd;AAdG,SAAR,QAAyB;AAC5B,QAAM,aAAa,cAAc;AACjC,QAAM,aAAa,cAAc;AAEjC,+BAAU,MAAM;AACZ,QAAI,YAAY,OAAO;AACnB,YAAM,WAAW,KAAK;AAAA,IAC1B;AAAA,EACJ,GAAG,CAAC,UAAU,CAAC;AAEf,QAAM,eAAe,WAAW,UAAU;AAE1C,SACI,mDAAC,SAAI,WAAU,cACX;AAAA,uDAAC,QAAG,qBAAJ;AAAA;AAAA;AAAA;AAAA,WAAS;AAAA,IACT,mDAAC,QAAK,QAAO,QACT;AAAA,yDAAC,WAAM,sBAAP;AAAA;AAAA;AAAA;AAAA,aAAa;AAAA,MACb,mDAAC,WAAM,MAAK,SAAQ,MAAK,SAAQ,UAAQ,QAAzC;AAAA;AAAA;AAAA;AAAA,aAA0C;AAAA,MAC1C,mDAAC,WAAM,yBAAP;AAAA;AAAA;AAAA;AAAA,aAAgB;AAAA,MAChB,mDAAC,WAAM,MAAK,YAAW,MAAK,YAAW,UAAQ,QAA/C;AAAA;AAAA;AAAA;AAAA,aAAgD;AAAA,MAEhD,mDAAC,YAAO,MAAK,UAAS,UAAU,cAC3B,yBAAe,kBAAkB,WADtC;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SARJ;AAAA;AAAA;AAAA;AAAA,WASA;AAAA,OAXJ;AAAA;AAAA;AAAA;AAAA,SAYA;AAER;",
  "names": ["import_react"]
}
