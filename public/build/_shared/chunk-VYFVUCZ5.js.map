{
  "version": 3,
  "sources": ["empty-module:~/sessions.server", "../../../app/routes/login/index.jsx"],
  "sourcesContent": ["module.exports = {};", "// app/routes/login/index.jsx\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, useActionData, useTransition } from \"@remix-run/react\";\nimport { getSession, commitSession } from \"~/sessions.server\";\nimport { useEffect } from \"react\";\n\n// \uD83E\uDDE9 Loader to prevent logged-in users from accessing /login\nexport async function loader({ request }) {\n  const session = await getSession(request.headers.get(\"Cookie\"));\n  const user = session.get(\"user\");\n  if (user) {\n    // already logged in \u2192 redirect to dashboard\n    return redirect(\"/dashboard\");\n  }\n  return json({});\n}\n\nexport async function action({ request }) {\n  const formData = await request.formData();\n  const email = formData.get(\"email\");\n  const password = formData.get(\"password\");\n\n  try {\n    const response = await fetch(\"http://192.168.1.51:8056/auth/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ email, password }),\n    });\n\n    if (!response.ok) {\n      return json({ error: \"Invalid email or password\" }, { status: 401 });\n    }\n\n    const apiData = await response.json();\n    const userData = apiData.data.data;\n\n    const session = await getSession(request);\n    session.set(\"user\", userData);\n\n    return redirect(\"/dashboard\", {\n      headers: {\n        \"Set-Cookie\": await commitSession(session),\n      },\n    });\n  } catch (error) {\n    console.error(\"Login failed:\", error);\n    return json({ error: \"Server error. Try again later.\" }, { status: 500 });\n  }\n}\n\nexport default function Login() {\n  const actionData = useActionData();\n  const transition = useTransition();\n\n  useEffect(() => {\n    if (actionData?.error) {\n      alert(actionData.error);\n    }\n  }, [actionData]);\n\n  const isSubmitting = transition.state === \"submitting\";\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <Form method=\"post\">\n        <input type=\"email\" name=\"email\" placeholder=\"Email\" required />\n        <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\n        <button type=\"submit\" disabled={isSubmitting}>\n          {isSubmitting ? \"Logging in...\" : \"Login\"}\n        </button>\n      </Form>\n    </div>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAAA;AAAA;AAAA,WAAO,UAAU,CAAC;AAAA;AAAA;;;ACGlB,sBAA0C;AAC1C,IAAAA,gBAA0B;AA4DpB;AAdS,SAAR,QAAyB;AAC9B,QAAM,aAAa,cAAc;AACjC,QAAM,aAAa,cAAc;AAEjC,+BAAU,MAAM;AACd,QAAI,YAAY,OAAO;AACrB,YAAM,WAAW,KAAK;AAAA,IACxB;AAAA,EACF,GAAG,CAAC,UAAU,CAAC;AAEf,QAAM,eAAe,WAAW,UAAU;AAE1C,SACE,mDAAC,SACC;AAAA,uDAAC,QAAG,qBAAJ;AAAA;AAAA;AAAA;AAAA,WAAS;AAAA,IACT,mDAAC,QAAK,QAAO,QACX;AAAA,yDAAC,WAAM,MAAK,SAAQ,MAAK,SAAQ,aAAY,SAAQ,UAAQ,QAA7D;AAAA;AAAA;AAAA;AAAA,aAA8D;AAAA,MAC9D,mDAAC,WAAM,MAAK,YAAW,MAAK,YAAW,aAAY,YAAW,UAAQ,QAAtE;AAAA;AAAA;AAAA;AAAA,aAAuE;AAAA,MACvE,mDAAC,YAAO,MAAK,UAAS,UAAU,cAC7B,yBAAe,kBAAkB,WADpC;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SALF;AAAA;AAAA;AAAA;AAAA,WAMA;AAAA,OARF;AAAA;AAAA;AAAA;AAAA,SASA;AAEJ;",
  "names": ["import_react"]
}
