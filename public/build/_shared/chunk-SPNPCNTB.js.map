{
  "version": 3,
  "sources": ["../../../app/routes/login/index.jsx"],
  "sourcesContent": ["import { json, redirect } from \"@remix-run/node\";\nimport { Form, useActionData, useTransition } from \"@remix-run/react\";\nimport { useEffect } from \"react\";\n\nexport async function action({ request }) {\n    const formData = await request.formData();\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n\n    try {\n        // Step 1: Login\n        const loginResponse = await fetch(\"http://192.168.1.51:8056/auth/login\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ email, password }),\n        });\n\n        const loginData = await loginResponse.json();\n\n        if (!loginResponse.ok) {\n            return json({ error: loginData.message || \"Login failed\" }, { status: loginResponse.status });\n        }\n\n        const token = loginData?.data?.data?.access_token;\n\n        // Step 2: Fetch user data\n        const userResponse = await fetch(\"http://192.168.1.51:8056/users/me\", {\n            headers: {\n                \"Authorization\": `Bearer ${token}`,\n            },\n        });\n\n        const userData = await userResponse.json();\n\n        if (!userResponse.ok) {\n            return json({ error: \"Failed to fetch user info\", details: userData }, { status: userResponse.status });\n        }\n\n        // Step 3: Redirect to /dashboard\n        // You can pass token and user data via session later\n        return redirect(\"/dashboard\");\n\n    } catch (error) {\n        console.error(\"Login process error:\", error);\n        return json({ error: error.message }, { status: 500 });\n    }\n}\n\nexport default function LoginPage() {\n    const actionData = useActionData();\n    const transition = useTransition();\n    const isSubmitting = transition.state === \"submitting\";\n\n    useEffect(() => {\n        if (actionData) console.log(\"Login Result:\", actionData);\n    }, [actionData]);\n\n    return (\n        <div style={{ padding: \"2rem\" }}>\n            <h2>Login</h2>\n            <Form method=\"post\">\n                <input type=\"email\" name=\"email\" placeholder=\"Email\" required />\n                <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\n                <button type=\"submit\" disabled={isSubmitting}>\n                    {isSubmitting ? \"Logging in...\" : \"Login\"}\n                </button>\n            </Form>\n\n            {actionData?.error && (\n                <p style={{ color: \"red\", marginTop: \"1rem\" }}>{actionData.error}</p>\n            )}\n        </div>\n    );\n}\n"],
  "mappings": ";;;;;;;;;;;;AAEA,IAAAA,gBAA0B;AAyDd;AAXG,SAAR,YAA6B;AAChC,QAAM,aAAa,cAAc;AACjC,QAAM,aAAa,cAAc;AACjC,QAAM,eAAe,WAAW,UAAU;AAE1C,+BAAU,MAAM;AACZ,QAAI;AAAY,cAAQ,IAAI,iBAAiB,UAAU;AAAA,EAC3D,GAAG,CAAC,UAAU,CAAC;AAEf,SACI,mDAAC,SAAI,OAAO,EAAE,SAAS,OAAO,GAC1B;AAAA,uDAAC,QAAG,qBAAJ;AAAA;AAAA;AAAA;AAAA,WAAS;AAAA,IACT,mDAAC,QAAK,QAAO,QACT;AAAA,yDAAC,WAAM,MAAK,SAAQ,MAAK,SAAQ,aAAY,SAAQ,UAAQ,QAA7D;AAAA;AAAA;AAAA;AAAA,aAA8D;AAAA,MAC9D,mDAAC,WAAM,MAAK,YAAW,MAAK,YAAW,aAAY,YAAW,UAAQ,QAAtE;AAAA;AAAA;AAAA;AAAA,aAAuE;AAAA,MACvE,mDAAC,YAAO,MAAK,UAAS,UAAU,cAC3B,yBAAe,kBAAkB,WADtC;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SALJ;AAAA;AAAA;AAAA;AAAA,WAMA;AAAA,IAEC,YAAY,SACT,mDAAC,OAAE,OAAO,EAAE,OAAO,OAAO,WAAW,OAAO,GAAI,qBAAW,SAA3D;AAAA;AAAA;AAAA;AAAA,WAAiE;AAAA,OAXzE;AAAA;AAAA;AAAA;AAAA,SAaA;AAER;",
  "names": ["import_react"]
}
