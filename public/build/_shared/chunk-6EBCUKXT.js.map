{
  "version": 3,
  "sources": ["empty-module:../../sessions.server", "empty-module:../../auth.server", "../../../app/routes/login/index.jsx"],
  "sourcesContent": ["module.exports = {};", "module.exports = {};", "// app/routes/login.jsx\nimport { redirect, json } from \"@remix-run/node\";\nimport { useEffect } from \"react\";\n// import { commitSession, getSession } from \"~/sessions.server\";\n// import { loginToExternalApi } from \"~/auth.server\";\nimport { Form, useActionData, useTransition } from \"@remix-run/react\";\nimport { commitSession, getSession, } from \"../../sessions.server\";\nimport { loginToExternalApi } from \"../../auth.server\";\n\nexport async function action({ request }) {\n    const formData = await request.formData();\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n\n    try {\n        const response = await fetch(\"http://192.168.1.51:8056/auth/login\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ email, password }),\n        });\n\n        const status = response.status;\n        const text = await response.text(); // get the raw response body\n        console.log(\"API Status:\", status);\n        console.log(\"API Raw Response:\", text);\n\n        // Try parsing JSON\n        let data;\n        try {\n            data = JSON.parse(text);\n        } catch (e) {\n            data = text; // If not valid JSON, return raw text\n        }\n\n        // Return API response to frontend\n        return json({ status, data });\n    } catch (error) {\n        console.error(\"Error calling API:\", error);\n        return json({ error: error.message }, { status: 500 });\n    }\n}\n\n\nexport default function LoginPage() {\n    const actionData = useActionData();\n    const transition = useTransition();\n\n    useEffect(() => {\n        if (actionData?.error) {\n            alert(actionData.error); // replace with toast if you prefer\n        }\n    }, [actionData]);\n\n    return (\n        <div className=\"flex justify-center items-center max-w-[600px]\">\n            <div className=\"w-full p-6 \">\n                <h2 style={{ marginBottom: 12 }}>Login</h2>\n                <Form method=\"post\">\n                    <input name=\"email\" type=\"email\" placeholder=\"Email\" required style={{ width: \"100%\", padding: 8, marginBottom: 8 }} />\n                    <input name=\"password\" type=\"password\" placeholder=\"Password\" required style={{ width: \"100%\", padding: 8, marginBottom: 12 }} />\n                    <button\n                        type=\"submit\"\n                        disabled={transition.state === \"submitting\"}\n                        style={{\n                            width: \"100%\",\n                            padding: 10,\n                            background: \"#2563eb\",\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: 6,\n                        }}\n                    >\n                        {transition.state === \"submitting\" ? \"Logging in...\" : \"Login\"}\n                    </button>\n                </Form>\n            </div>\n        </div>\n    );\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAAA;AAAA;AAAA,WAAO,UAAU,CAAC;AAAA;AAAA;;;ACAlB;AAAA;AAAA,WAAO,UAAU,CAAC;AAAA;AAAA;;;ACElB,mBAA0B;AAI1B,sBAA2C;AAC3C,kBAAmC;AAiDnB;AAbD,SAAR,YAA6B;AAChC,QAAM,aAAa,cAAc;AACjC,QAAM,aAAa,cAAc;AAEjC,8BAAU,MAAM;AACZ,QAAI,YAAY,OAAO;AACnB,YAAM,WAAW,KAAK;AAAA,IAC1B;AAAA,EACJ,GAAG,CAAC,UAAU,CAAC;AAEf,SACI,mDAAC,SAAI,WAAU,kDACX,6DAAC,SAAI,WAAU,eACX;AAAA,uDAAC,QAAG,OAAO,EAAE,cAAc,GAAG,GAAG,qBAAjC;AAAA;AAAA;AAAA;AAAA,WAAsC;AAAA,IACtC,mDAAC,QAAK,QAAO,QACT;AAAA,yDAAC,WAAM,MAAK,SAAQ,MAAK,SAAQ,aAAY,SAAQ,UAAQ,MAAC,OAAO,EAAE,OAAO,QAAQ,SAAS,GAAG,cAAc,EAAE,KAAlH;AAAA;AAAA;AAAA;AAAA,aAAqH;AAAA,MACrH,mDAAC,WAAM,MAAK,YAAW,MAAK,YAAW,aAAY,YAAW,UAAQ,MAAC,OAAO,EAAE,OAAO,QAAQ,SAAS,GAAG,cAAc,GAAG,KAA5H;AAAA;AAAA;AAAA;AAAA,aAA+H;AAAA,MAC/H;AAAA,QAAC;AAAA;AAAA,UACG,MAAK;AAAA,UACL,UAAU,WAAW,UAAU;AAAA,UAC/B,OAAO;AAAA,YACH,OAAO;AAAA,YACP,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,cAAc;AAAA,UAClB;AAAA,UAEC,qBAAW,UAAU,eAAe,kBAAkB;AAAA;AAAA,QAZ3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAaA;AAAA,SAhBJ;AAAA;AAAA;AAAA;AAAA,WAiBA;AAAA,OAnBJ;AAAA;AAAA;AAAA;AAAA,SAoBA,KArBJ;AAAA;AAAA;AAAA;AAAA,SAsBA;AAER;",
  "names": []
}
