{
  "version": 3,
  "sources": ["empty-module:../../sessions.server.js", "../../../app/routes/login/index.jsx", "../../../app/components/Button.jsx"],
  "sourcesContent": ["module.exports = {};", "import { json, redirect } from \"@remix-run/node\";\nimport { Form, useActionData, useTransition, useLoaderData } from \"@remix-run/react\";\nimport { useEffect, useState } from \"react\";\nimport { getSession, commitSession } from \"../../sessions.server.js\";\nimport Button from \"../../components/Button.jsx\";\n\n// \uD83E\uDDE0 Loader \u2014 kick out logged-in users\nexport async function loader({ request }) {\n    const session = await getSession(request);\n    const user = session.get(\"user\");\n    if (user) return redirect(\"/dashboard\");\n    return null;\n}\n\n// \uD83D\uDD39 Function to hit your external login API\nasync function loginToExternalApi({ email, password }) {\n    const response = await fetch(\"http://192.168.1.51:8056/auth/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password }),\n    });\n\n    if (!response.ok) {\n        const err = await response.text();\n        throw new Error(`Login failed: ${err}`);\n    }\n\n    return await response.json();\n}\n\n// \uD83D\uDD39 Remix action for login\nexport async function action({ request }) {\n    const formData = await request.formData();\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n\n    if (!email || !password) {\n        return json({ error: \"Email and password required\" }, { status: 400 });\n    }\n\n    try {\n        const result = await loginToExternalApi({ email, password });\n\n        // Create and save session\n        const session = await getSession(request);\n        session.set(\"user\", result.user || { email });\n\n        return redirect(\"/dashboard?login=success\", {\n            headers: {\n                \"Set-Cookie\": await commitSession(session),\n            },\n        });\n    } catch (error) {\n        console.error(\"\u274C Login error:\", error);\n        return json({ error: \"Invalid email or password\" }, { status: 401 });\n    }\n}\n\nexport default function LoginPage() {\n    const actionData = useActionData();\n    const transition = useTransition();\n\n\n    // Show error toast\n    useEffect(() => {\n        if (actionData?.error) {\n            setToast({ type: \"error\", message: actionData.error });\n            setTimeout(() => setToast(null), 3000);\n        }\n    }, [actionData]);\n\n    return (\n        <div className=\"flex flex-col items-center justify-center min-h-screen gap-4 relative p-4\">\n\n            <div className=\"flex items-center justify-between w-full max-w-[600px]\">\n                Login\n                <img src=\"/images/iss_logo.webp\" width=\"50px\" />\n            </div>\n\n            <Form method=\"post\" className=\"flex flex-col gap-6 max-w-[400px] w-full\">\n                <input\n                    name=\"email\"\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    required\n                    className=\"border p-2 rounded\"\n                />\n                <input\n                    name=\"password\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    required\n                    className=\"border p-2 rounded\"\n                />\n                <button\n                    type=\"submit\"\n                    className=\"bg-[#000022] text-white py-2 rounded\"\n                    disabled={transition.state === \"submitting\"}\n                >\n                 {transition.state === \"submitting\" ? \"Logging in...\" : \"Login\"}   \n                </button>\n\n                <Button type=\"submit\" disabled>\n                    {transition.state === \"submitting\" ? \"Logging in...\" : \"Login\"}\n                </Button>\n\n            </Form>\n        </div>\n    );\n}\n", "// app/components/Button.jsx\nexport default function Button({\n    children,\n    variant = \"primary\",\n    className = \"\",\n    type=\"button\",\n    ...props\n}) {\n    // Define base styles\n    const baseStyles =\n        \"px-4 py-2 rounded-lg font-medium focus:outline-none focus:ring transition\";\n\n    // Define color variants\n    const variants = {\n        primary: \"bg-[#000022] text-white hover:bg-blue-700 focus:ring-blue-300\",\n        secondary: \"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400\",\n        danger: \"bg-red-600 text-white hover:bg-red-700 focus:ring-red-300\",\n        outline:\n            \"border border-gray-400 text-gray-700 hover:bg-gray-100 focus:ring-gray-300\",\n    };\n\n    // Combine all styles\n    const styles = `${baseStyles} ${variants[variant]} ${className}`;\n\n    return (\n        <button type={type} className={styles} {...props}>\n            {children}\n        </button>\n    );\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAAA;AAAA;AAAA,WAAO,UAAU,CAAC;AAAA;AAAA;;;ACElB,IAAAA,gBAAoC;AACpC,6BAA0C;;;ACsBlC;AAxBO,SAAR,OAAwB;AAAA,EAC3B;AAAA,EACA,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,OAAK;AAAA,KACF;AACP,GAAG;AAEC,QAAM,aACF;AAGJ,QAAM,WAAW;AAAA,IACb,SAAS;AAAA,IACT,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,SACI;AAAA,EACR;AAGA,QAAM,SAAS,GAAG,cAAc,SAAS,YAAY;AAErD,SACI,mDAAC,YAAO,MAAY,WAAW,QAAS,GAAG,OACtC,YADL;AAAA;AAAA;AAAA;AAAA,SAEA;AAER;;;AD+CgB,IAAAC,0BAAA;AAlBD,SAAR,YAA6B;AAChC,QAAM,aAAa,cAAc;AACjC,QAAM,aAAa,cAAc;AAIjC,+BAAU,MAAM;AACZ,QAAI,YAAY,OAAO;AACnB,eAAS,EAAE,MAAM,SAAS,SAAS,WAAW,MAAM,CAAC;AACrD,iBAAW,MAAM,SAAS,IAAI,GAAG,GAAI;AAAA,IACzC;AAAA,EACJ,GAAG,CAAC,UAAU,CAAC;AAEf,SACI,oDAAC,SAAI,WAAU,6EAEX;AAAA,wDAAC,SAAI,WAAU,0DAAyD;AAAA;AAAA,MAEpE,oDAAC,SAAI,KAAI,yBAAwB,OAAM,UAAvC;AAAA;AAAA;AAAA;AAAA,aAA8C;AAAA,SAFlD;AAAA;AAAA;AAAA;AAAA,WAGA;AAAA,IAEA,oDAAC,QAAK,QAAO,QAAO,WAAU,4CAC1B;AAAA;AAAA,QAAC;AAAA;AAAA,UACG,MAAK;AAAA,UACL,MAAK;AAAA,UACL,aAAY;AAAA,UACZ,UAAQ;AAAA,UACR,WAAU;AAAA;AAAA,QALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACG,MAAK;AAAA,UACL,MAAK;AAAA,UACL,aAAY;AAAA,UACZ,UAAQ;AAAA,UACR,WAAU;AAAA;AAAA,QALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACG,MAAK;AAAA,UACL,WAAU;AAAA,UACV,UAAU,WAAW,UAAU;AAAA,UAEjC,qBAAW,UAAU,eAAe,kBAAkB;AAAA;AAAA,QALxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,MAEA,oDAAC,UAAO,MAAK,UAAS,UAAQ,MACzB,qBAAW,UAAU,eAAe,kBAAkB,WAD3D;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SAzBJ;AAAA;AAAA;AAAA;AAAA,WA2BA;AAAA,OAlCJ;AAAA;AAAA;AAAA;AAAA,SAmCA;AAER;",
  "names": ["import_react", "import_jsx_dev_runtime"]
}
