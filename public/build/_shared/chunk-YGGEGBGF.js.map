{
  "version": 3,
  "sources": ["../../../app/routes/login/index.jsx"],
  "sourcesContent": ["// app/routes/login/index.jsx\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, useActionData, useTransition } from \"@remix-run/react\";\nimport { useEffect, useState } from \"react\";\n\n// \uD83D\uDD39 Server: call your API\nasync function loginToExternalApi({ email, password }) {\n    const response = await fetch(\"http://192.168.1.51:8056/auth/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password }),\n    });\n\n    if (!response.ok) {\n        const err = await response.text();\n        throw new Error(`Login failed: ${err}`);\n    }\n\n    return await response.json();\n}\n\n// \uD83D\uDD39 Remix Action\nexport async function action({ request }) {\n    const formData = await request.formData();\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n\n    if (!email || !password) {\n        return json({ error: \"Email and password required\" }, { status: 400 });\n    }\n\n    try {\n        const result = await loginToExternalApi({ email, password });\n        console.log(\"\u2705 API Login Success:\", result);\n\n        // after successful login\n        return redirect(\"/dashboard?login=success\");\n    } catch (error) {\n        console.error(\"\u274C Login error:\", error);\n        return json({ error: \"Invalid email or password\" }, { status: 401 });\n    }\n}\n\n// \uD83D\uDD39 Frontend\nexport default function LoginPage() {\n    const actionData = useActionData();\n    const transition = useTransition();\n    const [toast, setToast] = useState(null);\n\n    // show toast for error\n    useEffect(() => {\n        if (actionData?.error) {\n            setToast({ type: \"error\", message: actionData.error });\n            setTimeout(() => setToast(null), 3000);\n        }\n    }, [actionData]);\n\n    // show toast for success after redirect\n    useEffect(() => {\n        const params = new URLSearchParams(window.location.search);\n        if (params.get(\"login\") === \"success\") {\n            setToast({ type: \"success\", message: \"Login successful!\" });\n            setTimeout(() => setToast(null), 3000);\n            // remove param so toast doesn\u2019t reappear on refresh\n            window.history.replaceState({}, \"\", \"/dashboard\");\n        }\n    }, []);\n\n    return (\n        <div className=\"flex flex-col items-center justify-center min-h-screen gap-4 relative\">\n            {toast && (\n                <div\n                    className={`fixed top-4 right-4 px-4 py-2 rounded shadow-lg text-white ${toast.type === \"error\" ? \"bg-red-600\" : \"bg-green-600\"\n                        }`}\n                >\n                    {toast.message}\n                </div>\n            )}\n\n            <h2 className=\"text-2xl font-bold\">Login</h2>\n\n            <Form method=\"post\" className=\"flex flex-col gap-2 w-64\">\n                <input\n                    name=\"email\"\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    required\n                    className=\"border p-2 rounded\"\n                />\n                <input\n                    name=\"password\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    required\n                    className=\"border p-2 rounded\"\n                />\n                <button\n                    type=\"submit\"\n                    className=\"bg-blue-600 text-white py-2 rounded\"\n                    disabled={transition.state === \"submitting\"}\n                >\n                    {transition.state === \"submitting\" ? \"Logging in...\" : \"Login\"}\n                </button>\n            </Form>\n        </div>\n    );\n}\n"],
  "mappings": ";;;;;;;;;;;;AAGA,IAAAA,gBAAoC;AAoEpB;AA3BD,SAAR,YAA6B;AAChC,QAAM,aAAa,cAAc;AACjC,QAAM,aAAa,cAAc;AACjC,QAAM,CAAC,OAAO,QAAQ,QAAI,wBAAS,IAAI;AAGvC,+BAAU,MAAM;AACZ,QAAI,YAAY,OAAO;AACnB,eAAS,EAAE,MAAM,SAAS,SAAS,WAAW,MAAM,CAAC;AACrD,iBAAW,MAAM,SAAS,IAAI,GAAG,GAAI;AAAA,IACzC;AAAA,EACJ,GAAG,CAAC,UAAU,CAAC;AAGf,+BAAU,MAAM;AACZ,UAAM,SAAS,IAAI,gBAAgB,OAAO,SAAS,MAAM;AACzD,QAAI,OAAO,IAAI,OAAO,MAAM,WAAW;AACnC,eAAS,EAAE,MAAM,WAAW,SAAS,oBAAoB,CAAC;AAC1D,iBAAW,MAAM,SAAS,IAAI,GAAG,GAAI;AAErC,aAAO,QAAQ,aAAa,CAAC,GAAG,IAAI,YAAY;AAAA,IACpD;AAAA,EACJ,GAAG,CAAC,CAAC;AAEL,SACI,mDAAC,SAAI,WAAU,yEACV;AAAA,aACG;AAAA,MAAC;AAAA;AAAA,QACG,WAAW,8DAA8D,MAAM,SAAS,UAAU,eAAe;AAAA,QAGhH,gBAAM;AAAA;AAAA,MAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAKA;AAAA,IAGJ,mDAAC,QAAG,WAAU,sBAAqB,qBAAnC;AAAA;AAAA;AAAA;AAAA,WAAwC;AAAA,IAExC,mDAAC,QAAK,QAAO,QAAO,WAAU,4BAC1B;AAAA;AAAA,QAAC;AAAA;AAAA,UACG,MAAK;AAAA,UACL,MAAK;AAAA,UACL,aAAY;AAAA,UACZ,UAAQ;AAAA,UACR,WAAU;AAAA;AAAA,QALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACG,MAAK;AAAA,UACL,MAAK;AAAA,UACL,aAAY;AAAA,UACZ,UAAQ;AAAA,UACR,WAAU;AAAA;AAAA,QALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACG,MAAK;AAAA,UACL,WAAU;AAAA,UACV,UAAU,WAAW,UAAU;AAAA,UAE9B,qBAAW,UAAU,eAAe,kBAAkB;AAAA;AAAA,QAL3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,SArBJ;AAAA;AAAA;AAAA;AAAA,WAsBA;AAAA,OAlCJ;AAAA;AAAA;AAAA;AAAA,SAmCA;AAER;",
  "names": ["import_react"]
}
