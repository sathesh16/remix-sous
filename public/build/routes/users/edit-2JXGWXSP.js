import{a as Y}from"/build/_shared/chunk-WUGKZFRL.js";import{a as q}from"/build/_shared/chunk-5RL4YNCK.js";import{a as te}from"/build/_shared/chunk-QPJOCY54.js";import{b as I}from"/build/_shared/chunk-USL65MEA.js";import{d as A}from"/build/_shared/chunk-RGLHNRFR.js";import"/build/_shared/chunk-7R5B3IJR.js";import"/build/_shared/chunk-VQXNYB6I.js";import{b as o}from"/build/_shared/chunk-YCQR2KKZ.js";import{B as H,h as w}from"/build/_shared/chunk-74WNBD7U.js";import{a as ee}from"/build/_shared/chunk-46CN3765.js";import{b as B,j as P}from"/build/_shared/chunk-62BE6IG2.js";import{a as X,b as E}from"/build/_shared/chunk-TYFUAS6F.js";import{d as m}from"/build/_shared/chunk-W6WK5VNR.js";var r=m(X());var F=m(te()),ue=m(Y());var se=m(ee()),e=m(E());function ae(){return{title:"Edit Users"}}function V(){var y,b,N,k,L,_,C,S;let{data:n,uId:h,Locations:oe,currentUser:f}=P(),[l,W]=r.default.useState((y=n[0])!=null&&y.email?(b=n[0])==null?void 0:b.email:""),[d,O]=r.default.useState((N=n[0])==null?void 0:N.first_name),[c,R]=r.default.useState(!1),[i,Q]=r.default.useState(""),[g,Z]=r.default.useState(!1),[z,x]=r.default.useState(!1),K=(L=(k=n[0])==null?void 0:k.allowed_locations)==null?void 0:L.map(t=>t==null?void 0:t.Locations_id),[s,v]=r.default.useState(K),u=B(),$=async t=>{var p,j,U,D,M;if(t.preventDefault(),((p=d==null?void 0:d.trim())==null?void 0:p.length)>0)if(((j=l==null?void 0:l.trim())==null?void 0:j.length)>0)if(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(l)){Z(!0);let J=w,T=(U=i==null?void 0:i.trim())!=null&&U.length?{first_name:d,email:l,password:i!==((D=n[0])==null?void 0:D.password)?i:(M=n[0])==null?void 0:M.password,password_copy:i,allowed_locations:s?s.map(a=>({Locations_id:a==null?void 0:a.id})):null,selected_locations:s?s==null?void 0:s[0]:null}:{first_name:d,email:l,selected_locations:s?s==null?void 0:s[0]:null,allowed_locations:s?s.map(a=>({Locations_id:a==null?void 0:a.id})):null};s!=null&&s.length?await J.users.updateOne(h,T).then(a=>{u("/users/manage"),o.success("Updated successfully")}).catch(a=>{console.log(a),u(".",{replace:!0}),o.error("Something went wrong")}):o.error("Location is required")}else o.error("Please enter a vaild Email address");else o.error("Email is required");else o.error("Name is required")},G=async()=>{await w.users.deleteOne(h).then(p=>{u("/users/manage"),o.success("Deleted successfully")}).catch(p=>{console.log(p),u(".",{replace:!0}),o.error("Something went wrong")})},re=t=>{v(t)},ne=t=>{v(t)};return(0,e.jsxs)("div",{children:[(0,e.jsx)(A,{title:!0,logout:!0,noLeftLogo:!!((C=H)!=null&&C.includes((_=f==null?void 0:f.selected_locations)==null?void 0:_.id))}),(0,e.jsx)("div",{className:"main-content-area",children:(0,e.jsx)("div",{className:" page__wrap w-full flex justify-center items-center mh-145",children:(0,e.jsx)("div",{className:"border p-6 min-w-[400px] rounded-md border-gray-300 form-area",children:(0,e.jsxs)("div",{className:"max-w-[400px] w-full px-5",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center gap-5 w-full",children:[(0,e.jsxs)("div",{className:"flex justify-start items-center gap-3",children:[(0,e.jsx)("div",{children:(0,e.jsx)("button",{type:"button",title:"Backward",onClick:()=>u(-1),className:"w-10 h-10 min-h-[40px] min-w-[40px] inline-flex items-center justify-center rounded-full border border-gray-100 bg-white  text-sm font-medium text-primary shadow-md hover:bg-gray-50 focus:outline-none focus:shadow-md sm:w-auto",children:(0,e.jsx)("span",{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"3",stroke:"currentColor",className:"w-5 h-5",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})})})}),(0,e.jsx)("div",{children:(0,e.jsx)("h1",{className:"text-xl font-semibold text-primary",children:(S=n[0])==null?void 0:S.first_name})})]}),(0,e.jsxs)("div",{className:"flex justify-between items-center gap-5",children:[(0,e.jsx)("button",{type:"button",title:"Delete User",onClick:t=>x(!0),className:"w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent bg-red-600 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2 sm:w-auto",children:(0,e.jsx)("span",{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-trash w-5 h-5",children:[(0,e.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,e.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})}),(0,e.jsx)("button",{title:"Update User",type:"button",onClick:t=>g?null:$(t),disabled:g,className:"w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent bg-primary text-sm font-medium text-white shadow-sm hover:bg-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 sm:w-auto",children:(0,e.jsx)("span",{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})})})]})]}),(0,e.jsxs)("div",{className:"mt-6 block w-full",children:[(0,e.jsxs)("div",{className:"space-y-6 bg-white py-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[(0,e.jsxs)("div",{className:"col-span-6",children:[(0,e.jsxs)("label",{htmlFor:"user-name",className:"block text-sm font-medium text-gray-700",children:["Name",(0,e.jsx)("span",{className:"text-red-600 text-base",children:"*"})]}),(0,e.jsx)("input",{type:"text",name:"user-name",id:"user-name",placeholder:"User Name",required:!0,autoComplete:"given-name",value:d,onChange:t=>O(t.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium focus:border-primary  focus:outline-none focus:ring-primary sm:text-sm"})]}),(0,e.jsxs)("div",{className:"col-span-6",children:[(0,e.jsxs)("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:["Email address",(0,e.jsx)("span",{className:"text-red-600 text-base",children:"*"})]}),(0,e.jsx)("input",{type:"email",name:"email-address",id:"email-address",placeholder:"User Email",required:!0,autoComplete:"email",value:l,onChange:t=>W(t.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium focus:border-primary  focus:outline-none focus:ring-primary sm:text-sm"})]}),(0,e.jsxs)("div",{className:"col-span-6 relative",children:[(0,e.jsxs)("label",{htmlFor:"user-paaword",className:"block text-sm font-medium text-gray-700",children:["Password"," ",(0,e.jsx)("span",{className:"text-gray-400 text-xs",children:"(optional)"})]}),(0,e.jsx)("input",{type:c?"text":"password",name:"user-password",id:"user-password",placeholder:"User Password",value:i||"",onChange:t=>Q(t.target.value),required:!0,autoComplete:"new-password",className:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium focus:border-primary  focus:outline-none focus:ring-primary sm:text-sm"}),(0,e.jsxs)("button",{type:"button",onClick:()=>{R(!c)},title:c?"Hide Password":"Show Password",className:"absolute z-10 right-5 bottom-[11px] cursor-pointer text-gray-300",children:[(0,e.jsx)("span",{id:"eye-off",className:c===!0?"hidden":"block",children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-eye-off w-4 h-4 text-black",children:[(0,e.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,e.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})}),(0,e.jsx)("span",{id:"eye-on",className:c===!1?"hidden":"block",children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-eye w-4 h-4 text-black",children:[(0,e.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,e.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]})]})," "]})," "]})]})})})}),z?(0,e.jsx)(q,{open:x,deleteHandle:G}):null,(0,e.jsx)(I,{})]})}export{V as default,ae as meta};
