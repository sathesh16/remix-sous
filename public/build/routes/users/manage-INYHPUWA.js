import{a as F}from"/build/_shared/chunk-5RL4YNCK.js";import{a as te}from"/build/_shared/chunk-QPJOCY54.js";import{b as E}from"/build/_shared/chunk-USL65MEA.js";import{d as Q}from"/build/_shared/chunk-RGLHNRFR.js";import"/build/_shared/chunk-7R5B3IJR.js";import"/build/_shared/chunk-VQXNYB6I.js";import{b as g}from"/build/_shared/chunk-YCQR2KKZ.js";import{B as O,h as W}from"/build/_shared/chunk-74WNBD7U.js";import{a as ee}from"/build/_shared/chunk-46CN3765.js";import{b as I,e as h,j as A}from"/build/_shared/chunk-62BE6IG2.js";import{a as Z,b as U}from"/build/_shared/chunk-TYFUAS6F.js";import{d as u}from"/build/_shared/chunk-W6WK5VNR.js";var f=u(Z());var K=u(te());var ae=u(ee()),e=u(U());function se(){return{title:"Manage Users"}}function V(){var k,L,_,C,S,M,$,j,D,z,P;let{data:s,currentPage:n,pagination:d,adminCount:re,response:oe,location_id:T}=A(),[r,i]=f.default.useState([]),[c,v]=f.default.useState(!1),[q,x]=f.default.useState(!1),o=I(),ie=10,m=10,G=t=>r.includes(t)?i(r.filter(a=>a!==t)):i([...r,t]),y=[];for(let t=0;t<(s==null?void 0:s.length);t++){var w=(L=(k=s[t])==null?void 0:k.allowed_locations)==null?void 0:L.map((a,Y)=>{var R,B,H;return Y===((R=s[t])==null?void 0:R.allowed_locations.length)-1?(B=a==null?void 0:a.Locations_id)==null?void 0:B.name:((H=a==null?void 0:a.Locations_id)==null?void 0:H.name)+","});y.push((0,e.jsxs)("tr",{className:r.includes((_=s[t])==null?void 0:_.id)?"cursor-pointer bg-transparent hover:bg-gray-50":"cursor-pointer bg-gray-50",children:[(0,e.jsx)("td",{className:" relative w-12 px-6 sm:w-16 sm:px-8",children:(0,e.jsx)("input",{type:"checkbox",title:"single-record",value:(C=s[t])==null?void 0:C.id,checked:!!r.includes((S=s[t])==null?void 0:S.id),onClick:()=>{var a;return G((a=s[t])==null?void 0:a.id)},onChange:a=>{},name:"chk",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary sm:left-6"})}),(0,e.jsx)("td",{className:`py-4 pr-3 text-sm font-medium ${r.includes((M=s[t])==null?void 0:M.id)?"text-primary":"text-gray-900"} `,onClick:()=>{var a;return o(`/users/edit?id=${(a=s[t])==null?void 0:a.id}`)},children:($=s[t])==null?void 0:$.first_name}),(0,e.jsx)("td",{className:`py-4 pr-3 text-sm font-medium ${r.includes((j=s[t])==null?void 0:j.id)?"text-primary":"text-gray-500"} `,onClick:()=>{var a;return o(`/users/edit?id=${(a=s[t])==null?void 0:a.id}`)},children:(D=s[t])==null?void 0:D.email}),(0,e.jsx)("td",{className:`py-4 pr-3 text-sm font-medium ${r.includes((z=s[t])==null?void 0:z.id)?"text-primary":"text-gray-500"} `,onClick:()=>{var a;return o(`/users/edit?id=${(a=s[t])==null?void 0:a.id}`)},children:w.length>0?w:null})]},t))}let b=t=>(i([]),o(`/users/manage?page=${parseInt(n)+t}`),v(!1)),J=()=>{v(!c),i(c?[]:s==null?void 0:s.map(t=>t==null?void 0:t.id))},X=async()=>{let t=W;(r==null?void 0:r.length)===1?await t.users.deleteOne(r[0]).then(a=>{i([]),o(".",{replace:!0}),g.success("Deleted successfully")}).catch(a=>{console.log(a),o(".",{replace:!0}),g.error("Something went wrong")}):await t.users.deleteMany(r).then(a=>{i([]),o(".",{replace:!0}),g.success("Deleted successfully")}).catch(a=>{console.log(a),g.error("Something went wrong")})},p=d%m===0?d%m==0?Math.floor(d/m):d%m:Math.floor(d/m)+1;for(var N=[],l=0;l<p;l++)N.push((0,e.jsx)(h,{to:`/users/manage?page=${l+1}`,"aria-current":"page",className:`relative rounded-md w-8 h-8 flex justify-center items-center font-semibold text-sm text-gray-500 focus:z-20 ${l+1===parseInt(n)?" bg-gray-200":"hover:bg-gray-100"}`,children:l+1},l));return(0,e.jsxs)("div",{children:[(0,e.jsx)(Q,{title:!0,logout:!0,noLeftLogo:!!((P=O)!=null&&P.includes(T))}),(0,e.jsx)("div",{className:"main-content-area",children:(0,e.jsxs)("div",{className:"page__wrap py-5 max-w-[1440px] px-4 mx-auto",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center gap-5",children:[(0,e.jsxs)("div",{className:"flex justify-start items-center gap-3",children:[(0,e.jsx)("div",{className:"cursor-pointer text-xl",onClick:()=>o("/"),children:(0,e.jsxs)("span",{children:[(0,e.jsx)("i",{className:"ri-home-4-line"})," /"]})}),(0,e.jsx)("div",{children:(0,e.jsx)("h1",{className:"text-xl font-semibold text-primary",children:"Users"})})]}),(0,e.jsxs)("div",{className:"flex justify-between items-center gap-5",children:[r!=null&&r.length?(0,e.jsx)("div",{children:(0,e.jsxs)("p",{children:["Selected ",r.length]})}):null," ",(0,e.jsxs)("button",{type:"button",title:"Delete User",onClick:t=>c||(r==null?void 0:r.length)?x(!0):null,className:`w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent 
               ${c||(r==null?void 0:r.length)?"bg-red-600  hover:bg-red-700  focus:ring-red-600":"bg-gray-400 cursor-default"} focus:outline-none focus:ring-2 text-sm font-medium text-white shadow-sm 
                focus:ring-offset-2 sm:w-auto`,children:[(0,e.jsx)("span",{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-trash w-5 h-5",children:[(0,e.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,e.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})," "]}),(0,e.jsx)(h,{to:"/users/create",title:"Add New User",className:"w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent bg-primary text-sm font-medium text-white shadow-sm hover:bg-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 sm:w-auto",children:(0,e.jsx)("span",{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-6 h-6",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})})})})]})]}),(0,e.jsxs)("div",{className:"mt-6 flex flex-col",children:[(0,e.jsx)("div",{className:"grid grid-cols-12 gap-5 overflow-x-auto xl:gap-24",children:(0,e.jsx)("div",{className:"col-span-12 lg:col-span-12 ",children:(0,e.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,e.jsx)("div",{className:"relative border rounded-md border-gray-200 overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,e.jsxs)("table",{className:"min-w-full divide-y  divide-gray-300",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"relative w-12 px-6 sm:w-16 sm:px-8",onClick:()=>J(),children:(0,e.jsx)("input",{type:"checkbox",title:"select-all-record",checked:!!c,onChange:t=>{},className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary sm:left-6"})}),(0,e.jsx)("th",{scope:"col",className:"py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 xl:min-w-[12rem]",children:"Name"}),(0,e.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Email Address"}),(0,e.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Location"})]})}),(0,e.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:y})]})})})})}),p>1?(0,e.jsx)("div",{className:"mt-8 mx-auto ",children:(0,e.jsxs)("nav",{className:"isolate inline-flex space-x-1 rounded-md","aria-label":"Pagination",children:[(0,e.jsxs)("button",{onClick:s&&!s.length&&n<=1?null:()=>b(-1),disabled:n<=1,"data-nav-operation":"previous",className:"relative rounded-md  bg-gray-50 w-8 h-8 flex justify-center items-center font-semibold text-sm text-gray-400 hover:bg-gray-100 focus:z-20",children:[(0,e.jsx)("span",{className:"sr-only",children:"Previous"}),(0,e.jsx)("svg",{className:"h-5 w-5",strokeWidth:"2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),N,(0,e.jsxs)("button",{onClick:s&&n>p-1?null:()=>b(1),disabled:s&&!s.length&&n>p-1,"data-nav-operation":"next",className:"relative rounded-r-md bg-gray-50 rounded-md w-8 h-8 flex justify-center items-center font-semibold text-sm text-gray-500 hover:bg-gray-100 focus:z-20",children:[(0,e.jsx)("span",{className:"sr-only",children:"Next"}),(0,e.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",strokeWidth:"2",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})}):null]})]})}),q?(0,e.jsx)(F,{open:x,deleteHandle:X}):null,(0,e.jsx)(E,{})]})}export{V as default,se as meta};
