{
  "version": 3,
  "sources": ["../../../../../../../../app/routes/banner/conference/$location/screen/$screen_name/index.jsx"],
  "sourcesContent": ["import React from \"react\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport Custom404Page from \"~/routes/$\";\nimport { getDirectusClient } from \"~/lib/directus\";\nimport { sessionStorage } from \"~/services/session.server\";\nimport { json } from \"@remix-run/node\";\nimport { format } from \"date-fns\";\n// import { getAssetURL } from \"~/utils/get-asset-url\";\nimport marienlystLogo from \"~/assets/images/marienlyst_logo.svg\"\n\nexport const loader = async ({ request, params }) => {\n  // Fetching session from the cookie\n  const session = await sessionStorage.getSession(\n    request.headers.get(\"Cookie\")\n  );\n  // Connecting with directus client using session key\n  var sessionkey = session.get(\"sessionKey\");\n  const directus = await getDirectusClient(sessionkey);\n  const current = await directus.users.me.read({\n    fields: [\"*\", \"selected_locations.*.*.*\", \"allowed_locations.*.*.*\"],\n  });\n\n  // Fetching today date and formatting it\n  const todaydate = new Date();\n  const date_filter = format(todaydate, \"yyyy-MM-dd\");\n  const formatted_date = format(todaydate, \"dd MMM yyyy\");\n\n  // Fetching screen_name, location id and logo\n  const screen_name = params?.screen_name;\n  const locationId = params?.location;\n  const logo = current?.selected_locations?.logo?.id;\n\n  // Fetching the conference data by today day and current location\n  const response = await directus.items(\"conference\").readByQuery({\n    fields: [\"*.*\"],\n    filter: {\n      date: { _eq: date_filter },\n      location_id: { _eq: locationId },\n    },\n    limit: 8,\n  });\n\n  // Checking location id in the url param exists\n  const Locations = await directus\n    .items(\"Locations\")\n    .readByQuery({ fields: [\"id\"] });\n  const LocationMatch = Locations?.data?.some((e) => e?.id == locationId);\n\n  return json({\n    logo: logo,\n    data: response,\n    today: formatted_date,\n    screen_name: screen_name,\n    location: LocationMatch,\n  });\n};\n\nfunction RenderConferenceTable(props) {\n  const table_rows = [];\n  var current_direction = \"\";\n\n  // Getting appropriate direction from the current screen\n  const setDirection = (row) => {\n    current_direction =\n      props.screen_name == \"a\"\n        ? row?.room_id?.screen_a\n        : row?.room_id?.screen_b;\n  };\n\n  // Rendering conference table body\n  props.table_data.map((row) => {\n    table_rows.push(\n      <tr key={row?.id} className=\"font-futura\">\n        <td className=\"room-data pr-10 text-left w-[45%]\"> {row?.company_name}</td>\n        <td className=\"room-data px-4 text-left w-[40%]\"> {row?.room_id?.name}</td>\n        <td className=\"room-data pl-2 text-center w-[15%]\">\n          {setDirection(row)}\n          {current_direction == \"Up\" ? (\n            <i className=\"ri-arrow-up-line\"></i>\n          ) : current_direction == \"Down\" ? (\n            <i className=\"ri-arrow-down-line\"></i>\n          ) : current_direction == \"Right\" ? (\n            <i className=\"ri-arrow-right-line\"></i>\n          ) : current_direction == \"Left\" ? (\n            <i className=\"ri-arrow-left-line\"></i>\n          ) : (\n            \"\"\n          )}\n        </td>\n      </tr>\n    );\n  });\n\n  return (\n    <>\n      <table className=\"border-spacing-5 mt-[50px] w-[80%] rooms-table\">\n        <thead>\n          <tr className=\"border-b border-b-black font-ivymode\">\n            <th className=\"py-[20px] pr-10 text-left w-[45%]\">COMPANY</th>\n            <th className=\"py-[20px] px-4 text-left w-[40%]\">ROOM</th>\n            <th className=\"py-[20px] pl-2 text-right w-[15%]\">DIRECTION</th>\n          </tr>\n        </thead>\n        <tbody>{table_rows}</tbody>\n      </table>\n    </>\n  );\n}\n\nexport default function index() {\n  const { logo, today, data, screen_name, location } = useLoaderData();\n\n  return (\n    <>\n      {screen_name == \"a\" || screen_name == \"b\" ? (\n        <>\n          {location == true ? (\n            <div className=\"room-banner flex flex-col text-primary items-center justify-start min-h-[100vh] px-6 py-32 mx-auto bg-[#ebdbb4]\">\n              {data?.data.length != 0 ? (\n                <>\n                  <img\n                    className=\"my-[72px] min-w-[175px]\"\n                    alt=\"company logo\"\n                    src={marienlystLogo} //{getAssetURL(logo)}\n                  />\n                  <h1 className=\"pb-[25px] font-ivymode title\">Conference</h1>\n                  <p className=\"pb-[50px] font-ivymode date\">{today}</p>\n                  <RenderConferenceTable\n                    screen_name={screen_name}\n                    table_data={data?.data}\n                  />\n                </>\n              ) : (\n                \"\"\n              )}\n            </div>\n          ) : (\n            <Custom404Page />\n          )}\n        </>\n      ) : (\n        <Custom404Page />\n      )}\n    </>\n  );\n}\n"],
  "mappings": "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",
  "names": []
}
