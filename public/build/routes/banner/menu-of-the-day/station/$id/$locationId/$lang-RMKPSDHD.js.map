{
  "version": 3,
  "sources": ["../../../../../../../../app/routes/banner/menu-of-the-day/station/$id/$locationId/$lang.jsx", "../../../../../../../../app/components/banner/bannerContent.jsx"],
  "sourcesContent": ["import React from \"react\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport { json } from \"@remix-run/node\";\nimport { getDirectusClient } from \"~/lib/directus\";\nimport { DEFAULT_LOCATION_ID } from \"~/utils/constants\";\nimport { sessionStorage } from \"~/services/session.server\";\nimport { format } from \"date-fns\";\nimport Custom404Page from \"~/routes/$\";\nimport BannerContent from \"~/components/banner/bannerContent\";\nexport const loader = async ({ request, params }) => {\n  const id = params.id;\n  const lang = params.lang;\n  const dateId = format(new Date(), \"yyyy-MM-dd\");\n  const locationId = params.locationId\n    ? params.locationId\n    : DEFAULT_LOCATION_ID;\n\n  const session = await sessionStorage.getSession(\n    request.headers.get(\"Cookie\")\n  );\n  var sessionKey = session.get(\"sessionKey\");\n  const directus = await getDirectusClient(sessionKey);\n  const Locations = await directus.items(\"Locations\").readByQuery({\n    fields: [\n      \"id\",\n      \"allowed_stations.Locations_id.id\",\n      \"allowed_stations.Stations_id.station_unique_id\",\n    ],\n  });\n  const LocationMatch = Locations?.data?.some((e) => e?.id == locationId);\n  // const allowedStationList = Locations?.data?.filter((e) =>\n  //   e?.allowed_stations?.some((e) => e?.Locations_id?.id == locationId)\n  // );\n  const station = Locations?.data?.some((e) =>\n    e?.allowed_stations?.some(\n      (e) =>\n        e?.Locations_id?.id == locationId &&\n        e?.Stations_id?.station_unique_id == id\n    )\n  );\n  const screenData = await directus\n    .items(\"screen_display\")\n    .readByQuery({\n      fields: [\n        \"*.*\",\n        \"recipe_id.*\",\n        \"recipe_id.allergens_list.Allergens_id.*\",\n        \"recipe_id.dietary_list.Dietary_id.*\",\n      ],\n      filter: {\n        location_id: { _eq: locationId },\n        date: { _eq: dateId },\n        station_name: { station_unique_id: { _eq: id } },\n      },\n    })\n    .then((e) => e?.data?.[0]);\n  const getAllStations = await directus\n    .items(\"Stations\")\n    .readByQuery({\n      fields: [\"*\"],\n      filter: {\n        id: { _eq: id },\n      },\n    })\n    .then((e) => e?.data[0]);\n\n  return json({\n    id,\n    lang,\n    dateId,\n    locationId,\n    LocationMatch,\n    station,\n    Locations,\n    screenData,\n    station_name: getAllStations,\n  });\n};\n\nfunction SingleBanner() {\n  const data = useLoaderData();\n  const stationData = data?.screenData?.recipe_id;\n  const [\n    menuDk,\n    menuEng,\n    Allergens,\n    Dietary,\n    plateImg,\n    calorie,\n    co2,\n    RecipePlateImg,\n  ] = [\n    stationData?.menu_info,\n    stationData?.menu_info_1,\n    stationData?.allergens_list,\n    stationData?.dietary_list,\n    data?.screenData?.app_resultant_image?.id,\n    stationData?.total_calories,\n    stationData?.total_co2,\n    stationData?.app_resultant_image,\n  ];\n  const titleCheck = data?.station_name?.station_name_translation?.filter(\n    (e) => e?.location_id == data?.locationId\n  );\n  const stationName =\n    titleCheck?.[0]?.name?.length > 0\n      ? titleCheck?.[0]?.name\n      : data?.station_name?.station_name;\n  const renderSingleItem = ({ language }) => {\n    return (\n      <BannerContent\n        menuDk={menuDk}\n        menuEng={menuEng}\n        Allergens={Allergens}\n        Dietary={Dietary}\n        stationName={stationName}\n        plateImg={\n          plateImg !== null && plateImg !== undefined && plateImg !== \"\"\n            ? plateImg\n            : RecipePlateImg\n        }\n        showType={\"id\"}\n        copyText={\"\"}\n        language={language}\n        isAdminUser={false}\n        calorie={calorie}\n        co2={co2}\n        stationId={data?.id}\n      />\n    );\n  };\n  return (\n    <>\n      {\" \"}\n      {data?.LocationMatch === false ||\n      (data?.id !== \"0\" && data?.station === false) ||\n      data?.station_name?.is_parent_station === true ||\n      (data?.lang !== \"en\" && data?.lang !== \"da\") ? (\n        <Custom404Page />\n      ) : (\n        <div className=\"page-preview station-preview\">\n          {renderSingleItem({ language: data?.lang })}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default SingleBanner;\n", "import React from \"react\";\nimport { getAssetURL } from \"~/utils/get-asset-url\";\nimport menuLogo from \"~/assets/images/banner-logo.png\";\nimport {\n  FRONTEND_URL,\n  DIETARY_PREFERENCES_ENG,\n  DIETARY_PREFERENCES_DK,\n  ALLERGENS_ENG,\n  ALLERGENS_ENG_DK,\n  EMPTY_ALLERGENS_ENG,\n  EMPTY_ALLERGENS_DK,\n} from \"~/utils/constants.js\";\nfunction BannerContent({\n  menuDk,\n  menuEng,\n  Allergens,\n  Dietary,\n  stationName,\n  plateImg,\n  copyText,\n  language,\n  isAdminUser,\n  calorie,\n  co2,\n  showType,\n}) {\n  const menu = language === \"da\" ? menuDk : menuEng;\n  const TotalCo2 =\n    co2 !== null && co2 !== undefined ? Number(co2)?.toFixed(2) : null;\n  const TotalCalorie =\n    calorie !== null && calorie !== undefined\n      ? Number(calorie)?.toFixed(2)\n      : null;\n  return (\n    <div className=\"banner-main-bg preview\" key={Math.random()}>\n      <div className=\"banner-bg text-primary relative flex flex-col pr-0 p-20\">\n        <div className=\"menu-logo flex justify-center w-full pr-24\">\n          <div\n            className=\"banner-img h-[13vw] w-[26vw] flex items-center\"\n            style={{ backgroundImage: `url(${menuLogo})` }}\n          ></div>\n        </div>\n        <div className=\"banner-contents p-slides flex justify-between w-full pt-4 \">\n          <div className=\"banner-left w-full self-center text-left\">\n            {<div className=\"banner-menu\">{menu}</div>}\n            {menu?.trim()?.length > 0 && (\n              <div className=\"banner-allergen font-noto font-normal\">\n                <span className=\"font-bold\">\n                  {language === \"da\" ? ALLERGENS_ENG_DK : ALLERGENS_ENG}:{\" \"}\n                </span>\n                {Allergens?.length > 0\n                  ? Allergens?.map(\n                      (e, i) =>\n                        `${\n                          e?.Allergens_id?.[\n                            language === \"da\" ? \"name\" : \"translated_name\"\n                          ]\n                        }${i !== Allergens?.length - 1 ? \", \" : \"\"}`\n                    )\n                  : language === \"da\"\n                  ? EMPTY_ALLERGENS_DK\n                  : EMPTY_ALLERGENS_ENG}\n              </div>\n            )}\n            {menu?.trim()?.length > 0 && Dietary?.length > 0 && (\n              <div className=\"banner-dietary font-normal\">\n                <span className=\"font-bold\">\n                  {language === \"da\"\n                    ? DIETARY_PREFERENCES_DK\n                    : DIETARY_PREFERENCES_ENG}\n                  :{\" \"}\n                </span>\n                {Dietary?.map(\n                  (e, i) =>\n                    `${\n                      e?.Dietary_id?.[\n                        language === \"da\" ? \"name\" : \"translated_name\"\n                      ]\n                    }${i !== Dietary?.length - 1 ? \", \" : \"\"}`\n                )}\n              </div>\n            )}\n            {menu?.trim()?.length > 0 && (\n              <div className=\"banner-calorie-co2 grid grid-cols-12 mt-20 mx-auto\">\n                {TotalCo2 !== null && TotalCo2 > 0 && (\n                  <div className=\"flex col-span-6  align-middle\">\n                    <div className=\"value slider-ivymode-font min-w-[8vw] min-h-[8vw] max-w-[8vw] max-h-[8vw] bg-[#dedfd2] rounded-full flex justify-center\titems-center p-[20px] font-semibold\ttext-[24px] flex-col\">\n                      {TotalCo2} <span className=\"text-[18px]\">kg</span>\n                    </div>\n                    <div className=\"content slider-font flex justify-start items-center font-medium ml-[7%] text-2xl\">\n                      CO2\n                    </div>\n                  </div>\n                )}\n                {TotalCalorie !== null && TotalCalorie > 0 && (\n                  <div className=\"flex col-span-6  align-middle\">\n                    <div className=\"value slider-ivymode-font min-w-[8vw] min-h-[8vw] max-w-[8vw] max-h-[8vw] bg-[#dedfd2] rounded-full flex justify-center\titems-center p-[20px] font-semibold\ttext-[24px] flex-col\">\n                      {TotalCalorie} <span className=\"text-[18px]\">kcal</span>\n                    </div>\n                    <div className=\"content slider-font flex justify-start items-center font-medium ml-[7%] text-2xl\">\n                      {language === \"da\" ? \"Energi\" : \"Energy\"} pr. 100g\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n          <div className=\"banner-right w-full relative flex items-center justify-end\">\n            <div\n              className=\"banner-img flex items-center\"\n              style={{\n                backgroundImage: `url(${\n                  plateImg != null && plateImg !== undefined && plateImg !== \"\"\n                    ? showType == \"id\" || showType == undefined\n                      ? getAssetURL(plateImg)\n                      : plateImg\n                    : null\n                })`,\n              }}\n            ></div>\n          </div>\n          <div className=\"bottom-station-name absolute bottom-5 right-0 px-24 pb-12 block text-right w-full text-[2vw] slider-font font-normal uppercase\">\n            {stationName}\n          </div>\n        </div>\n      </div>\n      {isAdminUser && (\n        <div className=\"absolute bottom-5 left-5 text-white bg-black p-2\">\n          <button onClick={() => copyText({ language: language, type: 1 })}>\n            Copy Link <i className=\"ri-clipboard-line\"></i>\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default BannerContent;\n"],
  "mappings": "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",
  "names": ["import_react", "_a"]
}
