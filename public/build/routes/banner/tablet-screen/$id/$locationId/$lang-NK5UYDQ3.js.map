{
  "version": 3,
  "sources": ["../../../../../../../app/routes/banner/tablet-screen/$id/$locationId/$lang.jsx"],
  "sourcesContent": ["import React from \"react\";\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport Custom404Page from \"~/routes/$\";\nimport { DEFAULT_LOCATION_ID, SECTION_1_ID } from \"~/utils/constants\";\nimport { getDirectusClient } from \"~/lib/directus\";\nimport { sessionStorage } from \"~/services/session.server\";\nimport { format } from \"date-fns\";\nimport TabContent from \"~/components/banner/tabContent\";\n\nexport const loader = async ({ request, params }) => {\n    const id = params.id;\n    const lang = params?.lang;\n    const locationId = (params?.locationId) ? params?.locationId : DEFAULT_LOCATION_ID;\n    const dateId = format(new Date(), \"yyyy-MM-dd\");\n    const session = await sessionStorage?.getSession(\n        request?.headers?.get(\"Cookie\")\n    );\n    var sessionkey = session?.get(\"sessionKey\");\n    const directus = await getDirectusClient(sessionkey);\n    const Locations = await directus.items(\"Locations\").readByQuery({\n        fields: [\n          \"id\",\n          \"allowed_stations.Locations_id.id\",\n          \"allowed_stations.Stations_id.station_unique_id\",\n        ],\n      });\n      const LocationMatch = Locations?.data?.some((e) => e?.id == locationId);\n      const station = Locations?.data?.some((e) =>\n        e?.allowed_stations?.some(\n          (e) =>\n            e?.Locations_id?.id == locationId &&\n            e?.Stations_id?.station_unique_id == id\n        )\n      );\n      const screenData = await directus\n        .items(\"screen_display\")\n        .readByQuery({\n          fields: [\n            \"*.*\",\n            \"recipe_id.*\",\n            \"recipe_id.allergens_list.Allergens_id.*\",\n            \"recipe_id.dietary_list.Dietary_id.*\",\n            \"station_name.station_image_1.*.*\",\n            \"station_name.station_image_2.*.*\"\n          ],\n          filter: {\n            location_id: { _eq: locationId },\n            date: { _eq: dateId },\n            station_name: { station_unique_id: { _eq: id } },\n          },\n        })\n        .then((e) => e?.data?.[0]);\n        const getAllStations = await directus\n        .items(\"Stations\")\n        .readByQuery({\n          fields: [\"*\"],\n          filter: {\n            id: { _eq: id },\n          },\n        })\n        .then((e) => e?.data[0]);\n    return json({\n        id,\n        lang,\n        dateId,\n        locationId,\n        LocationMatch,\n        station,\n        Locations,\n        screenData,\n        station_name:getAllStations\n    })\n}\n\nexport default function TabletBannerPage() {\n\n\n    const data = useLoaderData();\n    const stationData = data?.screenData?.recipe_id;\n    console.log(\"--sds\",data?.screenData)\n    const [menuDk, menuEng, Allergens, Dietary, plateImg,calorie,co2,RecipePlateImg] = [\n      stationData?.menu_info,\n      stationData?.menu_info_1,\n      stationData?.allergens_list,\n      stationData?.dietary_list,\n      data?.screenData?.app_resultant_image?.id,\n      stationData?.total_calories,\n      stationData?.total_co2,\n      stationData?.app_resultant_image\n    ];\n    const titleCheck= data?.station_name?.station_name_translation?.filter( (e) => e?.location_id ==data?.locationId);\n    const stationName= titleCheck?.[0]?.name?.length>0?titleCheck?.[0]?.name:data?.station_name?.station_name;\n    const stationImg = data?.screenData?.station_name?.station_image_1?.id;\n    const firstStation = (Number(SECTION_1_ID) === Number(data?.screenData?.station_name?.station_unique_id)?true:false)\n    const renderSingleItem = ({ language }) => {\n      return (\n        <TabContent\n          menuDk={menuDk}\n          menuEng={menuEng}\n          Allergens={Allergens}\n          Dietary={Dietary}\n          stationName={stationName}\n          stationImg={stationImg}\n          plateImg={plateImg!==null&&plateImg!==undefined&&plateImg!==''?plateImg:RecipePlateImg}\n          showType={'id'}\n          copyText={\"\"}\n          language={language}\n          isAdminUser={false}\n          calorie={calorie}\n          co2={co2}\n          firstStation= {firstStation}\n        />\n      );\n    };\n    return (\n      <>\n        {\" \"}\n        {data?.LocationMatch === false ||\n        (data?.id !== \"0\" && data?.station === false) ||\n        (data?.lang !== \"en\" && data?.lang !== \"da\") ? (\n          <Custom404Page />\n        ) : (\n          <div className=\"page-preview tablet\">\n            {renderSingleItem({ language: data?.lang })}\n          </div>\n        )}\n      </>\n    );\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mBAAkB;AAMlB,qBAA+B;AAN/B;AA2Ee,SAAR,mBAAoC;AA3E3C;AA8EI,QAAM,OAAO,cAAc;AAC3B,QAAM,eAAc,kCAAM,eAAN,mBAAkB;AACtC,UAAQ,IAAI,SAAQ,6BAAM,UAAU;AACpC,QAAM,CAAC,QAAQ,SAAS,WAAW,SAAS,UAAS,SAAQ,KAAI,cAAc,IAAI;AAAA,IACjF,2CAAa;AAAA,IACb,2CAAa;AAAA,IACb,2CAAa;AAAA,IACb,2CAAa;AAAA,KACb,wCAAM,eAAN,mBAAkB,wBAAlB,mBAAuC;AAAA,IACvC,2CAAa;AAAA,IACb,2CAAa;AAAA,IACb,2CAAa;AAAA,EACf;AACA,QAAM,cAAY,wCAAM,iBAAN,mBAAoB,6BAApB,mBAA8C,OAAQ,CAAC,OAAM,uBAAG,iBAAc,6BAAM;AACtG,QAAM,gBAAa,oDAAa,OAAb,mBAAiB,SAAjB,mBAAuB,UAAO,KAAE,8CAAa,OAAb,mBAAiB,QAAK,kCAAM,iBAAN,mBAAoB;AAC7F,QAAM,cAAa,8CAAM,eAAN,mBAAkB,iBAAlB,mBAAgC,oBAAhC,mBAAiD;AACpE,QAAM,eAAgB,OAAO,YAAY,MAAM,QAAO,wCAAM,eAAN,mBAAkB,iBAAlB,mBAAgC,iBAAiB,IAAE,OAAK;AAC9G,QAAM,mBAAmB,CAAC,EAAE,SAAS,MAAM;AACzC,WACE,mDAAC;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,UAAU,aAAW,QAAM,aAAW,UAAW,aAAW,KAAG,WAAS;AAAA,MACxE,UAAU;AAAA,MACV,UAAU;AAAA,MACV;AAAA,MACA,aAAa;AAAA,MACb;AAAA,MACA;AAAA,MACA;AAAA,OAdF;AAAA;AAAA;AAAA;AAAA,WAeA;AAAA,EAEJ;AACA,SACE;AAAA,IACG;AAAA;AAAA,OACA,6BAAM,mBAAkB,UACxB,6BAAM,QAAO,QAAO,6BAAM,aAAY,UACtC,6BAAM,UAAS,SAAQ,6BAAM,UAAS,OACrC,mDAAC,mBAAD;AAAA;AAAA;AAAA;AAAA,aAAe,IAEf,mDAAC;AAAA,QAAI,WAAU;AAAA,QACZ,2BAAiB,EAAE,UAAU,6BAAM,KAAK,CAAC;AAAA,SAD5C;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA;AAAA,KATJ;AAAA;AAAA;AAAA;AAAA,SAWA;AAEN;",
  "names": []
}
