{
  "version": 3,
  "sources": ["../../../../app/routes/dietary-requirements/edit.jsx"],
  "sourcesContent": ["import React from 'react'\nimport HeaderFile from '~/components/HeaderFile'\nimport { getDirectusClient } from \"~/lib/directus\";\nimport { Form, useLoaderData, useNavigate } from '@remix-run/react';\nimport { directusLoaderLink } from '~/utils/constants.js';\nimport { toast } from \"react-toastify\";\nimport DeleteModel from '~/components/deleteModel';\nimport Footer from \"~/components/Footer\";\nimport { sessionStorage } from \"~/services/session.server\";\nimport { authLogout, isLoggedIn } from '~/utils/db.server';\nimport { GOOGLE_TRANSLATION_APIKEY, GOOGLE_TRANSLATOR_URL, ISS_DENMARK_HQ } from \"~/utils/constants\";\n\nexport const action = async ({ request }) => {\n    await authLogout(request);\n};\n\nexport const loader = async ({ request }) => {\n    const url = new URL(request.url);\n    const id = url.searchParams.get(\"id\");\n    await isLoggedIn(request)\n    const session = await sessionStorage.getSession(\n        request.headers.get(\"Cookie\")\n    );\n    var sessionkey = session.get(\"sessionKey\");\n    const directus = await getDirectusClient(sessionkey);\n    const current = await directus.users.me.read({ fields: ['*.*'] })\n    const response = await directus.items(\"Dietary\").readByQuery({\n        fields: [\"*.*.*\"],\n        filter: { id: { _eq: id } }\n    });\n    return { uId: id, data: response?.data,location_id: current?.selected_locations?.id };\n};\n\nexport function meta() {\n    return { title: \"Edit Dietary\" };\n}\n\n\nexport default function DietaryEdit() {\n    const { data, uId,location_id } = useLoaderData();\n    const [modalIsOpen, setIsOpen] = React.useState(false);\n    const [namedata, setNamedata] = React.useState(data[0]?.name);\n    const [preventDouble, setPreventDouble] =React.useState(false)\n    const navigate = useNavigate();\n    let fromLang = 'da';\n    let toLang = 'en';\n    async function GoogleTranslator(text) {\n        try {\n            let url = `${GOOGLE_TRANSLATOR_URL}/language/translate/v2?key=${GOOGLE_TRANSLATION_APIKEY}`;\n            url += '&q=' + encodeURI(encodeURIComponent(text));\n            url += `&source=${fromLang}`;\n            url += `&target=${toLang}`;\n            const res = await fetch(url, {\n                method: 'GET',\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\"\n                }\n            });\n            return res.json();\n        } catch (err) {\n            console.log(\"error\")\n            setIsError(true);\n        }\n    }\n\n    const updateHandle = async (e) => {\n      if(namedata?.trim()?.length>0){ setPreventDouble(true);\n        const directus = directusLoaderLink;\n        await GoogleTranslator(namedata).then(async res =>\n            await directus.items(\"Dietary\").updateOne(uId, {\n                'name': namedata !== data[0]?.name ? namedata : data[0]?.name,\n                'translated_name': decodeURI(decodeURIComponent(res?.data?.translations?.[0]?.translatedText))?.replaceAll(\"&#39;\", \"'\") ?? \"translatedText\"\n\n            }).then(\n                (res) => {\n                    navigate(\"/dietary-requirements/manage\");\n                    toast.success('Updated successfully');\n                }\n            ).catch((err) => {\n                navigate('.', { replace: true });\n                console.log(err)\n                toast.error('Something went wrong');\n            }))}\n            else{\n                toast.error('Name is required');\n            }\n    }\n\n    const deleteHandle = async () => {\n        const directus = directusLoaderLink;\n        await directus.items(\"Dietary\").deleteOne(uId).then(\n            (res) => {\n                navigate(\"/dietary-requirements/manage\");\n                toast.success('Deleted successfully');\n            }\n        ).catch((err) => {\n            navigate('.', { replace: true });\n            console.log(err)\n            toast.error('Something went wrong');\n        });\n    }\n\n    return (\n        <div className=\"page-content\">\n            <HeaderFile title logout  noLeftLogo ={ISS_DENMARK_HQ?.includes(location_id)? true: false} />\n            <div className=\"main-content-area\">\n                <div className=\"page__wrap w-full flex justify-center items-center mh-145\">\n                    <div className='border p-6 rounded-md border-gray-300 form-area e-allergens'>\n                        <div className=\"max-w-[400px] w-full\">\n                            <div className=\"flex justify-between items-center gap-5\">\n                                <div className=\"flex justify-start items-center gap-3\">\n                                    <div>\n                                        <button type=\"button\" title=\"Backward\"\n                                            onClick={() => navigate(-1)}\n                                            className=\"w-10 h-10 min-h-[40px] min-w-[40px] inline-flex items-center justify-center rounded-full border border-gray-100 bg-white  text-sm font-medium text-primary shadow-md hover:bg-gray-50 focus:outline-none focus:shadow-md sm:w-auto\">\n                                            <span>\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"3\"\n                                                    stroke=\"currentColor\" className=\"w-5 h-5\">\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\n                                                        d=\"M15.75 19.5L8.25 12l7.5-7.5\" />\n                                                </svg>\n                                            </span>\n                                        </button>\n                                    </div>\n                                    <div>\n                                        <h1 className=\"text-xl font-semibold text-primary\">{data[0]?.name}</h1>\n                                    </div>\n                                </div>\n                                <div className=\"flex justify-between items-center gap-5\">\n                                    <button type=\"button\" title=\"Delete Dietary Preferences\"\n                                        onClick={(e) => setIsOpen(true)}\n                                        className=\"w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent bg-red-600 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2 sm:w-auto\">\n                                        <span>\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\"\n                                                stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"\n                                                className=\"feather feather-trash w-5 h-5\">\n                                                <polyline points=\"3 6 5 6 21 6\"></polyline>\n                                                <path\n                                                    d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\">\n                                                </path>\n                                            </svg>\n                                        </span>\n\n                                    </button>\n                                    <button title=\"Update Dietary Preferences\"\n                                         onClick={(e) =>preventDouble ? null:updateHandle(e)}\n                                         disabled={preventDouble}\n                                        className=\"w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent bg-primary text-sm font-medium text-white shadow-sm hover:bg-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 sm:w-auto\">\n                                        <span>\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\"\n                                                stroke=\"currentColor\" className=\"w-5 h-5\">\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\" />\n                                            </svg>\n\n                                        </span>\n\n                                    </button>\n\n                                </div>\n                            </div>\n                            <div className=\"mt-6 block max-w-[580px]\">\n                                <Form action=\"#\" method=\"POST\">\n                                    <div className=\"space-y-6 bg-white py-6\">\n                                        <div className=\"grid grid-cols-6 gap-6\">\n                                            <div className=\"col-span-6\">\n                                                <label htmlFor=\"user-name\" className=\"block text-sm font-medium text-gray-700\">Name<span\n                                                    className=\"text-red-600 text-base\">*</span></label>\n                                                <input type=\"text\" name=\"user-name\" id=\"user-name\" placeholder=\"Dietary Name\" required\n                                                    value={namedata}\n                                                    onChange={(e) => setNamedata(e.target.value)}\n\n                                                    autoComplete=\"given-name\"\n                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium focus:border-primary  focus:outline-none focus:ring-primary sm:text-sm\" />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </Form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {modalIsOpen ? <DeleteModel open={setIsOpen} deleteHandle={deleteHandle} /> : null}\n            <Footer />\n        </div>\n    )\n}"],
  "mappings": "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",
  "names": ["React", "_a", "_b", "_c", "res"]
}
