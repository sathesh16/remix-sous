{
  "version": 3,
  "sources": ["../../../../app/routes/dietary-requirements/create.jsx"],
  "sourcesContent": ["import { Form, useNavigate,useLoaderData } from '@remix-run/react'\nimport React, { useState } from 'react'\nimport { getDirectusClient } from \"~/lib/directus\";\nimport { directusLoaderLink } from '~/utils/constants.js';\nimport HeaderFile from '~/components/HeaderFile'\nimport { toast } from \"react-toastify\";\nimport Footer from \"~/components/Footer\";\nimport { sessionStorage } from \"~/services/session.server\";\nimport { authLogout, isLoggedIn } from '~/utils/db.server';\nimport { GOOGLE_TRANSLATION_APIKEY, GOOGLE_TRANSLATOR_URL, ISS_DENMARK_HQ } from \"~/utils/constants\";\n\nexport const action = async ({ request }) => {\n    await authLogout(request);\n};\nexport const loader = async ({ request }) => {\n    await isLoggedIn(request)\n    const session = await sessionStorage.getSession(\n        request.headers.get(\"Cookie\")\n    );\n    var sessionkey = session.get(\"sessionKey\");\n    const directus = await getDirectusClient(sessionkey);\n    const current = await directus.users.me.read({ fields: ['*.*'] })\n    return { location_id: current?.selected_locations?.id };\n};\n\nexport function meta() {\n    return { title: \"Create Dietary Preferences\" };\n}\n\nexport default function Dietarycreate() {\n    const { location_id } = useLoaderData();\n    const [auth, setAuth] = useState(true);\n    const navigate = useNavigate()\n    const [dietary,setDietary] = useState(\"\");\n    const [buttonTrigger,setButtonTrigger]=React.useState(false)\n    const dietaryRef=React.useRef(null);\n    let fromLang = 'da';\n    let toLang = 'en';\n\n    React.useEffect(() => {\n        const element = document.getElementById(\"submitId\");\n        element.addEventListener(\"click\", function() {\n            if(!buttonTrigger){\n                if(!!dietary?.trim()){\n                    if (document.activeElement !== dietaryRef.current) {\n                    element.style.pointerEvents=\"none\";\n                    setButtonTrigger(true);\n                    }\n                }\n                \n            }\n          });\n          return ()=>{\n            element.removeEventListener(\"click\", function() {\n                 setButtonTrigger(false);\n              })\n        }\n    },[dietary]);\n\n    async function GoogleTranslator(text) {\n        try {\n            let url = `${GOOGLE_TRANSLATOR_URL}/language/translate/v2?key=${GOOGLE_TRANSLATION_APIKEY}`;\n            url += '&q=' + encodeURI(encodeURIComponent(text));\n            url += `&source=${fromLang}`;\n            url += `&target=${toLang}`;\n\n            const res = await fetch(url, {\n                method: 'GET',\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\"\n                }\n            });\n            const responce = res.json()\n            return responce;\n        } catch (err) {\n            console.log(\"error\", err)\n            // setIsError(true);\n        }\n    }\n\n    const createHandle = async (e) => {\n        const directus = directusLoaderLink\n        let pattern = /[A-z]/g;\n\n        if (dietary?.trim(\" \")?.length > 0) {\n            await GoogleTranslator(dietary).then(async res =>\n                await directus.items(\"Dietary\").createOne({\n                    'name': dietary,\n                    'translated_name': decodeURI(decodeURIComponent(res?.data?.translations?.[0]?.translatedText))?.replaceAll(\"&#39;\",\"'\")?? \"translatedText\"\n\n                }).then(\n                    (res) => {\n                        navigate(\"/dietary-requirements/manage\");\n                        toast.success(' Created successfully');\n                    }\n                ).catch((err) => {\n                    navigate('.', { replace: true });\n                    console.log(err)\n                    toast.error(err);\n                }))\n        }\n        else {\n            toast.error(\"Enter valid charecters\");\n        }\n    }\n    return (\n        <div className=\"page-content\">\n            <HeaderFile title logout={setAuth} noLeftLogo ={ISS_DENMARK_HQ?.includes(location_id)? true: false} />\n            <div className=\"main-content-area\">\n                <div className=\"page__wrap w-full flex justify-center items-center mh-145\">\n                    <div className='border p-6 rounded-md border-gray-300 form-area c-allergens'>\n                        <Form onSubmit={(e) => createHandle(e)}  >\n                            <div className=\"max-w-[400px] w-full\">\n                                <div className=\"flex justify-between items-center gap-5\">\n                                    <div className=\"flex justify-start items-center gap-3\">\n                                        <div>\n                                            <button type=\"button\" title=\"Backward\"\n                                                onClick={() => navigate(-1)}\n                                                className=\"w-10 h-10 min-h-[40px] min-w-[40px] inline-flex items-center justify-center rounded-full border border-gray-100 bg-white  text-sm font-medium text-primary shadow-md hover:bg-gray-50 focus:outline-none focus:shadow-md sm:w-auto\">\n                                                <span>\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"3\"\n                                                        stroke=\"currentColor\" className=\"w-5 h-5\">\n                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\n                                                            d=\"M15.75 19.5L8.25 12l7.5-7.5\" />\n                                                    </svg>\n                                                </span>\n                                            </button>\n                                        </div>\n                                        <div>\n                                            <h1 className=\"text-xl font-semibold text-primary\">Create a Dietary Preferences</h1>\n                                        </div>\n                                    </div>\n                                    <div className=\"flex justify-between items-center gap-5\">\n                                        <button type=\"submit\"  id=\"submitId\" title=\"Save\"\n                                            className=\"w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent bg-primary text-sm font-medium text-white shadow-sm hover:bg-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 sm:w-auto\">\n                                            <span>\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\"\n                                                    stroke=\"currentColor\" className=\"w-5 h-5\">\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\" />\n                                                </svg>\n                                            </span>\n                                        </button>\n                                    </div>\n                                </div>\n                                <div className=\"mt-6 block\">\n                                    <div className=\"space-y-6 bg-white py-6\">\n                                        <div className=\"grid grid-cols-6 gap-6\">\n                                            <div className=\"col-span-6\">\n                                                <label htmlFor=\"user-name\" className=\"block text-sm font-medium text-gray-700\">Name<span\n                                                    className=\"text-red-600 text-base\">*</span></label>\n                                                <input type=\"text\" name=\"user-name\" id=\"user-name\"\n                                                    placeholder=\"Dietary Name\"\n                                                    required\n                                                    ref={dietaryRef}\n                                                    value={dietary}\n                                                    onChange={(e) =>setDietary(e.target.value)}\n                                                    autoComplete=\"given-name\"\n                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium focus:border-primary  focus:outline-none focus:ring-primary sm:text-sm\" />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </Form>\n                    </div>\n                </div>\n            </div>\n            <Footer />\n        </div>\n    )\n}"],
  "mappings": "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",
  "names": ["import_react", "React", "_a", "res"]
}
