import{b as nn}from"/build/_shared/chunk-3IPV3IZD.js";import{a as ln}from"/build/_shared/chunk-YAUMQ47I.js";import{a as rn}from"/build/_shared/chunk-OV4W7B6E.js";import{a as Vn}from"/build/_shared/chunk-QPJOCY54.js";import{b as tn}from"/build/_shared/chunk-USL65MEA.js";import{a as Hn,c as Wn,d as en}from"/build/_shared/chunk-RGLHNRFR.js";import{a as Dn}from"/build/_shared/chunk-7R5B3IJR.js";import"/build/_shared/chunk-VQXNYB6I.js";import"/build/_shared/chunk-ILY76UAV.js";import{b as Xe,c as Ct,d as Zr,e as Mr}from"/build/_shared/chunk-YCQR2KKZ.js";import{C as Gr,D as Rt,F as Qr,G as Jr,J as $t,a as Dr,b as Hr,c as Wr,h as ve,n as At,o as $r,p as Vr,q as qr,r as Pt,s as zr,t as Ur,u as Kr,x as Wt,y as Xr,z as Yr}from"/build/_shared/chunk-74WNBD7U.js";import{g as Vt}from"/build/_shared/chunk-SDPGU3B7.js";import{a as $n}from"/build/_shared/chunk-46CN3765.js";import{e as Br,j as Fr}from"/build/_shared/chunk-62BE6IG2.js";import{a as Ke,b as Be}from"/build/_shared/chunk-TYFUAS6F.js";import{b as dt,d as ge}from"/build/_shared/chunk-W6WK5VNR.js";var on=dt((yi,sn)=>{sn.exports=function(e){var r={};function n(t){if(r[t])return r[t].exports;var i=r[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=r,n.p="",n(0)}([function(e,r,n){e.exports=n(1)},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});function t(u){return u&&u.__esModule?u:{default:u}}var i=n(2),a=t(i);r.default=a.default,e.exports=r.default},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=Object.assign||function(h){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var v in o)Object.prototype.hasOwnProperty.call(o,v)&&(h[v]=o[v])}return h};r.default=b;function i(h){return h&&h.__esModule?h:{default:h}}function a(h,s){var o={};for(var v in h)s.indexOf(v)>=0||!Object.prototype.hasOwnProperty.call(h,v)||(o[v]=h[v]);return o}var u=n(3),y=n(4),g=i(y),E=n(14),p=n(15),_=i(p);b.propTypes={activeClassName:g.default.string,activeIndex:g.default.number,activeStyle:g.default.object,autoEscape:g.default.bool,className:g.default.string,findChunks:g.default.func,highlightClassName:g.default.oneOfType([g.default.object,g.default.string]),highlightStyle:g.default.object,highlightTag:g.default.oneOfType([g.default.node,g.default.func,g.default.string]),sanitize:g.default.func,searchWords:g.default.arrayOf(g.default.oneOfType([g.default.string,g.default.instanceOf(RegExp)])).isRequired,textToHighlight:g.default.string.isRequired,unhighlightTag:g.default.oneOfType([g.default.node,g.default.func,g.default.string]),unhighlightClassName:g.default.string,unhighlightStyle:g.default.object};function b(h){var s=h.activeClassName,o=s===void 0?"":s,v=h.activeIndex,T=v===void 0?-1:v,k=h.activeStyle,f=h.autoEscape,W=h.caseSensitive,j=W===void 0?!1:W,oe=h.className,L=h.findChunks,ee=h.highlightClassName,Y=ee===void 0?"":ee,ue=h.highlightStyle,N=ue===void 0?{}:ue,$=h.highlightTag,de=$===void 0?"mark":$,Oe=h.sanitize,G=h.searchWords,_e=h.textToHighlight,ne=h.unhighlightTag,be=ne===void 0?"span":ne,Ne=h.unhighlightClassName,we=Ne===void 0?"":Ne,x=h.unhighlightStyle,S=a(h,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),q=(0,u.findAll)({autoEscape:f,caseSensitive:j,findChunks:L,sanitize:Oe,searchWords:G,textToHighlight:_e}),B=de,D=-1,K="",X=void 0,I=function(J){var U={};for(var ce in J)U[ce.toLowerCase()]=J[ce];return U},z=(0,_.default)(I);return(0,E.createElement)("span",t({className:oe},S,{children:q.map(function(F,J){var U=_e.substr(F.start,F.end-F.start);if(F.highlight){D++;var ce=void 0;typeof Y=="object"?j?ce=Y[U]:(Y=z(Y),ce=Y[U.toLowerCase()]):ce=Y;var C=D===+T;K=ce+" "+(C?o:""),X=C===!0&&k!=null?Object.assign({},N,k):N;var Re={children:U,className:K,key:J,style:X};return typeof B!="string"&&(Re.highlightIndex=D),(0,E.createElement)(B,Re)}else return(0,E.createElement)(be,{children:U,className:we,key:J,style:x})})}))}e.exports=r.default},function(e,r){e.exports=function(n){var t={};function i(a){if(t[a])return t[a].exports;var u=t[a]={exports:{},id:a,loaded:!1};return n[a].call(u.exports,u,u.exports,i),u.loaded=!0,u.exports}return i.m=n,i.c=t,i.p="",i(0)}([function(n,t,i){n.exports=i(1)},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return a.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return a.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return a.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return a.findChunks}})},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.findAll=function(_){var b=_.autoEscape,h=_.caseSensitive,s=h===void 0?!1:h,o=_.findChunks,v=o===void 0?u:o,T=_.sanitize,k=_.searchWords,f=_.textToHighlight;return y({chunksToHighlight:a({chunks:v({autoEscape:b,caseSensitive:s,sanitize:T,searchWords:k,textToHighlight:f})}),totalLength:f?f.length:0})},a=t.combineChunks=function(_){var b=_.chunks;return b=b.sort(function(h,s){return h.start-s.start}).reduce(function(h,s){if(h.length===0)return[s];var o=h.pop();if(s.start<=o.end){var v=Math.max(o.end,s.end);h.push({start:o.start,end:v})}else h.push(o,s);return h},[]),b},u=function(_){var b=_.autoEscape,h=_.caseSensitive,s=_.sanitize,o=s===void 0?g:s,v=_.searchWords,T=_.textToHighlight;return T=o(T),v.filter(function(k){return k}).reduce(function(k,f){f=o(f),b&&(f=E(f));for(var W=new RegExp(f,h?"g":"gi"),j=void 0;j=W.exec(T);){var oe=j.index,L=W.lastIndex;L>oe&&k.push({start:oe,end:L}),j.index==W.lastIndex&&W.lastIndex++}return k},[])};t.findChunks=u;var y=t.fillInChunks=function(_){var b=_.chunksToHighlight,h=_.totalLength,s=[],o=function(k,f,W){f-k>0&&s.push({start:k,end:f,highlight:W})};if(b.length===0)o(0,h,!1);else{var v=0;b.forEach(function(T){o(v,T.start,!1),o(T.start,T.end,!0),v=T.end}),o(v,h,!1)}return s};function g(p){return p}function E(p){return p.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}])},function(e,r,n){(function(t){if(t.env.NODE_ENV!=="production"){var i=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,a=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===i},u=!0;e.exports=n(6)(a,u)}else e.exports=n(13)()}).call(r,n(5))},function(e,r){var n=e.exports={},t,i;function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=a}catch{t=a}try{typeof clearTimeout=="function"?i=clearTimeout:i=u}catch{i=u}})();function y(T){if(t===setTimeout)return setTimeout(T,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(T,0);try{return t(T,0)}catch{try{return t.call(null,T,0)}catch{return t.call(this,T,0)}}}function g(T){if(i===clearTimeout)return clearTimeout(T);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(T);try{return i(T)}catch{try{return i.call(null,T)}catch{return i.call(this,T)}}}var E=[],p=!1,_,b=-1;function h(){!p||!_||(p=!1,_.length?E=_.concat(E):b=-1,E.length&&s())}function s(){if(!p){var T=y(h);p=!0;for(var k=E.length;k;){for(_=E,E=[];++b<k;)_&&_[b].run();b=-1,k=E.length}_=null,p=!1,g(T)}}n.nextTick=function(T){var k=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)k[f-1]=arguments[f];E.push(new o(T,k)),E.length===1&&!p&&y(s)};function o(T,k){this.fun=T,this.array=k}o.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function v(){}n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(T){return[]},n.binding=function(T){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(T){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,r,n){(function(t){"use strict";var i=n(7),a=n(8),u=n(9),y=n(10),g=n(11),E=n(12);e.exports=function(p,_){var b=typeof Symbol=="function"&&Symbol.iterator,h="@@iterator";function s(x){var S=x&&(b&&x[b]||x[h]);if(typeof S=="function")return S}var o="<<anonymous>>",v={array:W("array"),bool:W("boolean"),func:W("function"),number:W("number"),object:W("object"),string:W("string"),symbol:W("symbol"),any:j(),arrayOf:oe,element:L(),instanceOf:ee,node:$(),objectOf:ue,oneOf:Y,oneOfType:N,shape:de,exact:Oe};function T(x,S){return x===S?x!==0||1/x===1/S:x!==x&&S!==S}function k(x){this.message=x,this.stack=""}k.prototype=Error.prototype;function f(x){if(t.env.NODE_ENV!=="production")var S={},q=0;function B(K,X,I,z,F,J,U){if(z=z||o,J=J||I,U!==g){if(_)a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(t.env.NODE_ENV!=="production"&&typeof console<"u"){var ce=z+":"+I;!S[ce]&&q<3&&(u(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",J,z),S[ce]=!0,q++)}}return X[I]==null?K?X[I]===null?new k("The "+F+" `"+J+"` is marked as required "+("in `"+z+"`, but its value is `null`.")):new k("The "+F+" `"+J+"` is marked as required in "+("`"+z+"`, but its value is `undefined`.")):null:x(X,I,z,F,J)}var D=B.bind(null,!1);return D.isRequired=B.bind(null,!0),D}function W(x){function S(q,B,D,K,X,I){var z=q[B],F=ne(z);if(F!==x){var J=be(z);return new k("Invalid "+K+" `"+X+"` of type "+("`"+J+"` supplied to `"+D+"`, expected ")+("`"+x+"`."))}return null}return f(S)}function j(){return f(i.thatReturnsNull)}function oe(x){function S(q,B,D,K,X){if(typeof x!="function")return new k("Property `"+X+"` of component `"+D+"` has invalid PropType notation inside arrayOf.");var I=q[B];if(!Array.isArray(I)){var z=ne(I);return new k("Invalid "+K+" `"+X+"` of type "+("`"+z+"` supplied to `"+D+"`, expected an array."))}for(var F=0;F<I.length;F++){var J=x(I,F,D,K,X+"["+F+"]",g);if(J instanceof Error)return J}return null}return f(S)}function L(){function x(S,q,B,D,K){var X=S[q];if(!p(X)){var I=ne(X);return new k("Invalid "+D+" `"+K+"` of type "+("`"+I+"` supplied to `"+B+"`, expected a single ReactElement."))}return null}return f(x)}function ee(x){function S(q,B,D,K,X){if(!(q[B]instanceof x)){var I=x.name||o,z=we(q[B]);return new k("Invalid "+K+" `"+X+"` of type "+("`"+z+"` supplied to `"+D+"`, expected ")+("instance of `"+I+"`."))}return null}return f(S)}function Y(x){if(!Array.isArray(x))return t.env.NODE_ENV!=="production"&&u(!1,"Invalid argument supplied to oneOf, expected an instance of array."),i.thatReturnsNull;function S(q,B,D,K,X){for(var I=q[B],z=0;z<x.length;z++)if(T(I,x[z]))return null;var F=JSON.stringify(x);return new k("Invalid "+K+" `"+X+"` of value `"+I+"` "+("supplied to `"+D+"`, expected one of "+F+"."))}return f(S)}function ue(x){function S(q,B,D,K,X){if(typeof x!="function")return new k("Property `"+X+"` of component `"+D+"` has invalid PropType notation inside objectOf.");var I=q[B],z=ne(I);if(z!=="object")return new k("Invalid "+K+" `"+X+"` of type "+("`"+z+"` supplied to `"+D+"`, expected an object."));for(var F in I)if(I.hasOwnProperty(F)){var J=x(I,F,D,K,X+"."+F,g);if(J instanceof Error)return J}return null}return f(S)}function N(x){if(!Array.isArray(x))return t.env.NODE_ENV!=="production"&&u(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),i.thatReturnsNull;for(var S=0;S<x.length;S++){var q=x[S];if(typeof q!="function")return u(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",Ne(q),S),i.thatReturnsNull}function B(D,K,X,I,z){for(var F=0;F<x.length;F++){var J=x[F];if(J(D,K,X,I,z,g)==null)return null}return new k("Invalid "+I+" `"+z+"` supplied to "+("`"+X+"`."))}return f(B)}function $(){function x(S,q,B,D,K){return G(S[q])?null:new k("Invalid "+D+" `"+K+"` supplied to "+("`"+B+"`, expected a ReactNode."))}return f(x)}function de(x){function S(q,B,D,K,X){var I=q[B],z=ne(I);if(z!=="object")return new k("Invalid "+K+" `"+X+"` of type `"+z+"` "+("supplied to `"+D+"`, expected `object`."));for(var F in x){var J=x[F];if(!!J){var U=J(I,F,D,K,X+"."+F,g);if(U)return U}}return null}return f(S)}function Oe(x){function S(q,B,D,K,X){var I=q[B],z=ne(I);if(z!=="object")return new k("Invalid "+K+" `"+X+"` of type `"+z+"` "+("supplied to `"+D+"`, expected `object`."));var F=y({},q[B],x);for(var J in F){var U=x[J];if(!U)return new k("Invalid "+K+" `"+X+"` key `"+J+"` supplied to `"+D+"`.\nBad object: "+JSON.stringify(q[B],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(x),null,"  "));var ce=U(I,J,D,K,X+"."+J,g);if(ce)return ce}return null}return f(S)}function G(x){switch(typeof x){case"number":case"string":case"undefined":return!0;case"boolean":return!x;case"object":if(Array.isArray(x))return x.every(G);if(x===null||p(x))return!0;var S=s(x);if(S){var q=S.call(x),B;if(S!==x.entries){for(;!(B=q.next()).done;)if(!G(B.value))return!1}else for(;!(B=q.next()).done;){var D=B.value;if(D&&!G(D[1]))return!1}}else return!1;return!0;default:return!1}}function _e(x,S){return x==="symbol"||S["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&S instanceof Symbol}function ne(x){var S=typeof x;return Array.isArray(x)?"array":x instanceof RegExp?"object":_e(S,x)?"symbol":S}function be(x){if(typeof x>"u"||x===null)return""+x;var S=ne(x);if(S==="object"){if(x instanceof Date)return"date";if(x instanceof RegExp)return"regexp"}return S}function Ne(x){var S=be(x);switch(S){case"array":case"object":return"an "+S;case"boolean":case"date":case"regexp":return"a "+S;default:return S}}function we(x){return!x.constructor||!x.constructor.name?o:x.constructor.name}return v.checkPropTypes=E,v.PropTypes=v,v}}).call(r,n(5))},function(e,r){"use strict";function n(i){return function(){return i}}var t=function(){};t.thatReturns=n,t.thatReturnsFalse=n(!1),t.thatReturnsTrue=n(!0),t.thatReturnsNull=n(null),t.thatReturnsThis=function(){return this},t.thatReturnsArgument=function(i){return i},e.exports=t},function(e,r,n){(function(t){"use strict";var i=function(y){};t.env.NODE_ENV!=="production"&&(i=function(y){if(y===void 0)throw new Error("invariant requires an error message argument")});function a(u,y,g,E,p,_,b,h){if(i(y),!u){var s;if(y===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=[g,E,p,_,b,h],v=0;s=new Error(y.replace(/%s/g,function(){return o[v++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}e.exports=a}).call(r,n(5))},function(e,r,n){(function(t){"use strict";var i=n(7),a=i;if(t.env.NODE_ENV!=="production"){var u=function(g){for(var E=arguments.length,p=Array(E>1?E-1:0),_=1;_<E;_++)p[_-1]=arguments[_];var b=0,h="Warning: "+g.replace(/%s/g,function(){return p[b++]});typeof console<"u"&&console.error(h);try{throw new Error(h)}catch{}};a=function(g,E){if(E===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(E.indexOf("Failed Composite propType: ")!==0&&!g){for(var p=arguments.length,_=Array(p>2?p-2:0),b=2;b<p;b++)_[b-2]=arguments[b];u.apply(void 0,[E].concat(_))}}}e.exports=a}).call(r,n(5))},function(e,r){"use strict";var n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(y){if(y==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(y)}function u(){try{if(!Object.assign)return!1;var y=new String("abc");if(y[5]="de",Object.getOwnPropertyNames(y)[0]==="5")return!1;for(var g={},E=0;E<10;E++)g["_"+String.fromCharCode(E)]=E;var p=Object.getOwnPropertyNames(g).map(function(b){return g[b]});if(p.join("")!=="0123456789")return!1;var _={};return"abcdefghijklmnopqrst".split("").forEach(function(b){_[b]=b}),Object.keys(Object.assign({},_)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}e.exports=u()?Object.assign:function(y,g){for(var E,p=a(y),_,b=1;b<arguments.length;b++){E=Object(arguments[b]);for(var h in E)t.call(E,h)&&(p[h]=E[h]);if(n){_=n(E);for(var s=0;s<_.length;s++)i.call(E,_[s])&&(p[_[s]]=E[_[s]])}}return p}},function(e,r){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,r,n){(function(t){"use strict";if(t.env.NODE_ENV!=="production")var i=n(8),a=n(9),u=n(11),y={};function g(E,p,_,b,h){if(t.env.NODE_ENV!=="production"){for(var s in E)if(E.hasOwnProperty(s)){var o;try{i(typeof E[s]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",b||"React class",_,s,typeof E[s]),o=E[s](p,s,b,_,null,u)}catch(T){o=T}if(a(!o||o instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",b||"React class",_,s,typeof o),o instanceof Error&&!(o.message in y)){y[o.message]=!0;var v=h?h():"";a(!1,"Failed %s type: %s%s",_,o.message,v??"")}}}}e.exports=g}).call(r,n(5))},function(e,r,n){"use strict";var t=n(7),i=n(8),a=n(11);e.exports=function(){function u(E,p,_,b,h,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}u.isRequired=u;function y(){return u}var g={array:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:y,element:u,instanceOf:y,node:u,objectOf:y,oneOf:y,oneOfType:y,shape:y,exact:y};return g.checkPropTypes=t,g.PropTypes=g,g}},function(e,r){e.exports=Ke()},function(e,r){"use strict";var n=function(a,u){return a===u};function t(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,u=void 0,y=[],g=void 0,E=!1,p=function(h,s){return a(h,y[s])},_=function(){for(var h=arguments.length,s=Array(h),o=0;o<h;o++)s[o]=arguments[o];return E&&u===this&&s.length===y.length&&s.every(p)||(E=!0,u=this,y=s,g=i.apply(this,s)),g};return _}e.exports=t}])});var yn=dt((wi,vn)=>{var zn=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function Un(e){var r,n,t,i=e.ownerDocument,a=i.body,u=i&&i.documentElement;return r=e.getBoundingClientRect(),n=r.left,t=r.top,n-=u.clientLeft||a.clientLeft||0,t-=u.clientTop||a.clientTop||0,{left:n,top:t}}function fn(e,r){var n=e["page"+(r?"Y":"X")+"Offset"],t="scroll"+(r?"Top":"Left");if(typeof n!="number"){var i=e.document;n=i.documentElement[t],typeof n!="number"&&(n=i.body[t])}return n}function Ut(e){return fn(e)}function Kt(e){return fn(e,!0)}function pn(e){var r=Un(e),n=e.ownerDocument,t=n.defaultView||n.parentWindow;return r.left+=Ut(t),r.top+=Kt(t),r}function Kn(e,r,n){var t="",i=e.ownerDocument;return(n=n||i.defaultView.getComputedStyle(e,null))&&(t=n.getPropertyValue(r)||n[r]),t}var Xn=new RegExp("^("+zn+")(?!px)[a-z%]+$","i"),Yn=/^(top|right|bottom|left)$/,qt="currentStyle",zt="runtimeStyle",Ye="left",Gn="px";function Qn(e,r){var n=e[qt]&&e[qt][r];if(Xn.test(n)&&!Yn.test(r)){var t=e.style,i=t[Ye],a=e[zt][Ye];e[zt][Ye]=e[qt][Ye],t[Ye]=r==="fontSize"?"1em":n||0,n=t.pixelLeft+Gn,t[Ye]=i,e[zt][Ye]=a}return n===""?"auto":n}var Ge;typeof window<"u"&&(Ge=window.getComputedStyle?Kn:Qn);function Jn(e,r){nt(e,"position")==="static"&&(e.style.position="relative");var n=pn(e),t={},i,a;for(a in r)i=parseFloat(nt(e,a))||0,t[a]=i+r[a]-n[a];nt(e,t)}function Gt(e,r){for(var n=0;n<e.length;n++)r(e[n])}function hn(e){return Ge(e,"boxSizing")==="border-box"}var Zn=["margin","border","padding"],Xt=-1,Mn=2,Yt=1,ei=0;function ti(e,r,n){var t={},i=e.style,a;for(a in r)t[a]=i[a],i[a]=r[a];n.call(e);for(a in r)i[a]=t[a]}function ft(e,r,n){var t=0,i,a,u;for(a=0;a<r.length;a++)if(i=r[a],i)for(u=0;u<n.length;u++){var y;i==="border"?y=i+n[u]+"Width":y=i+n[u],t+=parseFloat(Ge(e,y))||0}return t}function Lt(e){return e!=null&&e==e.window}var Fe={};Gt(["Width","Height"],function(e){Fe["doc"+e]=function(r){var n=r.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],Fe["viewport"+e](n))},Fe["viewport"+e]=function(r){var n="client"+e,t=r.document,i=t.body,a=t.documentElement,u=a[n];return t.compatMode==="CSS1Compat"&&u||i&&i[n]||u}});function un(e,r,n){if(Lt(e))return r==="width"?Fe.viewportWidth(e):Fe.viewportHeight(e);if(e.nodeType===9)return r==="width"?Fe.docWidth(e):Fe.docHeight(e);var t=r==="width"?["Left","Right"]:["Top","Bottom"],i=r==="width"?e.offsetWidth:e.offsetHeight,a=Ge(e),u=hn(e,a),y=0;(i==null||i<=0)&&(i=void 0,y=Ge(e,r),(y==null||Number(y)<0)&&(y=e.style[r]||0),y=parseFloat(y)||0),n===void 0&&(n=u?Yt:Xt);var g=i!==void 0||u,E=i||y;return n===Xt?g?E-ft(e,["border","padding"],t,a):y:g?E+(n===Yt?0:n===Mn?-ft(e,["border"],t,a):ft(e,["margin"],t,a)):y+ft(e,Zn.slice(n),t,a)}var ri={position:"absolute",visibility:"hidden",display:"block"};function dn(e){var r,n=arguments;return e.offsetWidth!==0?r=un.apply(void 0,n):ti(e,ri,function(){r=un.apply(void 0,n)}),r}Gt(["width","height"],function(e){var r=e.charAt(0).toUpperCase()+e.slice(1);Fe["outer"+r]=function(t,i){return t&&dn(t,e,i?ei:Yt)};var n=e==="width"?["Left","Right"]:["Top","Bottom"];Fe[e]=function(t,i){if(i!==void 0){if(t){var a=Ge(t),u=hn(t);return u&&(i+=ft(t,["padding","border"],n,a)),nt(t,e,i)}return}return t&&dn(t,e,Xt)}});function nt(e,r,n){if(typeof r=="object"){for(var t in r)nt(e,t,r[t]);return}if(typeof n<"u")typeof n=="number"&&(n=n+"px"),e.style[r]=n;else return Ge(e,r)}function mn(e,r){for(var n in r)e[n]=r[n];return e}var gn=vn.exports={getWindow:function(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow},offset:function(e,r){if(typeof r<"u")Jn(e,r);else return pn(e)},isWindow:Lt,each:Gt,css:nt,clone:function(e){var r={};for(var n in e)r[n]=e[n];var t=e.overflow;if(t)for(n in e)r.overflow[n]=e.overflow[n];return r},mix:mn,scrollLeft:function(e,r){if(Lt(e)){if(r===void 0)return Ut(e);window.scrollTo(r,Kt(e))}else{if(r===void 0)return e.scrollLeft;e.scrollLeft=r}},scrollTop:function(e,r){if(Lt(e)){if(r===void 0)return Kt(e);window.scrollTo(Ut(e),r)}else{if(r===void 0)return e.scrollTop;e.scrollTop=r}},merge:function(){for(var e={},r=0;r<arguments.length;r++)gn.mix(e,arguments[r]);return e},viewportWidth:0,viewportHeight:0};mn(gn,Fe)});var bn=dt((Si,_n)=>{var se=yn();function ni(e,r,n){n=n||{},r.nodeType===9&&(r=se.getWindow(r));var t=n.allowHorizontalScroll,i=n.onlyScrollIfNeeded,a=n.alignWithTop,u=n.alignWithLeft;t=t===void 0?!0:t;var y=se.isWindow(r),g=se.offset(e),E=se.outerHeight(e),p=se.outerWidth(e),_,b,h,s,o,v,T,k,f,W;y?(T=r,W=se.height(T),f=se.width(T),k={left:se.scrollLeft(T),top:se.scrollTop(T)},o={left:g.left-k.left,top:g.top-k.top},v={left:g.left+p-(k.left+f),top:g.top+E-(k.top+W)},s=k):(_=se.offset(r),b=r.clientHeight,h=r.clientWidth,s={left:r.scrollLeft,top:r.scrollTop},o={left:g.left-(_.left+(parseFloat(se.css(r,"borderLeftWidth"))||0)),top:g.top-(_.top+(parseFloat(se.css(r,"borderTopWidth"))||0))},v={left:g.left+p-(_.left+h+(parseFloat(se.css(r,"borderRightWidth"))||0)),top:g.top+E-(_.top+b+(parseFloat(se.css(r,"borderBottomWidth"))||0))}),o.top<0||v.top>0?a===!0?se.scrollTop(r,s.top+o.top):a===!1?se.scrollTop(r,s.top+v.top):o.top<0?se.scrollTop(r,s.top+o.top):se.scrollTop(r,s.top+v.top):i||(a=a===void 0?!0:!!a,a?se.scrollTop(r,s.top+o.top):se.scrollTop(r,s.top+v.top)),t&&(o.left<0||v.left>0?u===!0?se.scrollLeft(r,s.left+o.left):u===!1?se.scrollLeft(r,s.left+v.left):o.left<0?se.scrollLeft(r,s.left+o.left):se.scrollLeft(r,s.left+v.left):i||(u=u===void 0?!0:!!u,u?se.scrollLeft(r,s.left+o.left):se.scrollLeft(r,s.left+v.left)))}_n.exports=ni});var wn=dt((Oi,xn)=>{xn.exports=bn()});var En=dt((Ei,On)=>{"use strict";var jt=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},ii=function(){function e(r,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();function li(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function si(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function oi(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var Qe=Ke(),ye=Hn(),ai=Dn(),Sn=ai.findDOMNode,ci=wn(),ui=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function di(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var Bt=function(e){oi(r,e);function r(n){li(this,r);var t=si(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n));return t.state={isOpen:!1,highlightedIndex:null},t._debugStates=[],t.ensureHighlightedIndex=t.ensureHighlightedIndex.bind(t),t.exposeAPI=t.exposeAPI.bind(t),t.handleInputFocus=t.handleInputFocus.bind(t),t.handleInputBlur=t.handleInputBlur.bind(t),t.handleChange=t.handleChange.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t.handleInputClick=t.handleInputClick.bind(t),t.maybeAutoCompleteText=t.maybeAutoCompleteText.bind(t),t}return ii(r,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(t){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),t.autoHighlight&&(this.props.value!==t.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(t,i){(this.state.isOpen&&!i.isOpen||"open"in this.props&&this.props.open&&!t.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),i.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(t){var i=this;this.refs.input=t,ui.forEach(function(a){return i[a]=t&&t[a]&&t[a].bind(t)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var t=this.refs["item-"+this.state.highlightedIndex],i=this.refs.menu;ci(Sn(t),Sn(i),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(t){r.keyDownHandlers[t.key]?r.keyDownHandlers[t.key].call(this,t):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(t){this.props.onChange(t,t.target.value)}},{key:"getFilteredItems",value:function(t){var i=t.items;return t.shouldItemRender&&(i=i.filter(function(a){return t.shouldItemRender(a,t.value)})),t.sortItems&&i.sort(function(a,u){return t.sortItems(a,u,t.value)}),i}},{key:"maybeAutoCompleteText",value:function(t,i){for(var a=t.highlightedIndex,u=i.value,y=i.getItemValue,g=a===null?0:a,E=this.getFilteredItems(i),p=0;p<E.length&&!i.isItemSelectable(E[g]);p++)g=(g+1)%E.length;var _=E[g]&&i.isItemSelectable(E[g])?E[g]:null;if(u!==""&&_){var b=y(_),h=b.toLowerCase().indexOf(u.toLowerCase())===0;if(h)return{highlightedIndex:g}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(t,i){if(t.highlightedIndex>=this.getFilteredItems(i).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var t=this.refs.input,i=t.getBoundingClientRect(),a=globalThis.window.getComputedStyle(t),u=parseInt(a.marginBottom,10)||0,y=parseInt(a.marginLeft,10)||0,g=parseInt(a.marginRight,10)||0;this.setState({menuTop:i.bottom+u,menuLeft:i.left+y,menuWidth:i.width+y+g})}},{key:"highlightItemFromMouse",value:function(t){this.setState({highlightedIndex:t})}},{key:"selectItemFromMouse",value:function(t){var i=this,a=this.props.getItemValue(t);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){i.props.onSelect(a,t)})}},{key:"setIgnoreBlur",value:function(t){this._ignoreBlur=t}},{key:"renderMenu",value:function(){var t=this,i=this.getFilteredItems(this.props).map(function(y,g){var E=t.props.renderItem(y,t.state.highlightedIndex===g,{cursor:"default"});return Qe.cloneElement(E,{onMouseEnter:t.props.isItemSelectable(y)?function(){return t.highlightItemFromMouse(g)}:null,onClick:t.props.isItemSelectable(y)?function(){return t.selectItemFromMouse(y)}:null,ref:function(_){return t.refs["item-"+g]=_}})}),a={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},u=this.props.renderMenu(i,this.props.value,a);return Qe.cloneElement(u,{ref:function(g){return t.refs.menu=g},onTouchStart:function(){return t.setIgnoreBlur(!0)},onMouseEnter:function(){return t.setIgnoreBlur(!0)},onMouseLeave:function(){return t.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(t){var i=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=di(),this.refs.input.focus();return}var a=void 0,u=this.state.highlightedIndex;if(this.props.selectOnBlur&&u!==null){var y=this.getFilteredItems(this.props),g=y[u],E=this.props.getItemValue(g);a=function(){return i.props.onSelect(E,g)}}this.setState({isOpen:!1,highlightedIndex:null},a);var p=this.props.inputProps.onBlur;p&&p(t)}},{key:"handleInputFocus",value:function(t){var i=this;if(this._ignoreFocus){this._ignoreFocus=!1;var a=this._scrollOffset,u=a.x,y=a.y;this._scrollOffset=null,window.scrollTo(u,y),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){i._scrollTimer=null,window.scrollTo(u,y)},0);return}this.setState({isOpen:!0});var g=this.props.inputProps.onFocus;g&&g(t)}},{key:"isInputFocused",value:function(){var t=this.refs.input;return t.ownerDocument&&t===t.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(t,i){return i?function(a){t(a),i(a)}:t}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var t=this.props.inputProps,i=this.isOpen();return Qe.createElement("div",jt({style:jt({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(jt({},t,{role:"combobox","aria-autocomplete":"list","aria-expanded":i,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,t.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,t.onClick),value:this.props.value})),i&&this.renderMenu(),this.props.debug&&Qe.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),r}(Qe.Component);Bt.propTypes={items:ye.array.isRequired,value:ye.any,onChange:ye.func,onSelect:ye.func,shouldItemRender:ye.func,isItemSelectable:ye.func,sortItems:ye.func,getItemValue:ye.func.isRequired,renderItem:ye.func.isRequired,renderMenu:ye.func,menuStyle:ye.object,renderInput:ye.func,inputProps:ye.object,wrapperProps:ye.object,wrapperStyle:ye.object,autoHighlight:ye.bool,selectOnBlur:ye.bool,onMenuVisibilityChange:ye.func,open:ye.bool,debug:ye.bool};Bt.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(r){return Qe.createElement("input",r)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(r,n,t){return Qe.createElement("div",{style:jt({},t,this.menuStyle),children:r})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}};Bt.keyDownHandlers={ArrowDown:function(r){r.preventDefault();var n=this.getFilteredItems(this.props);if(!!n.length){for(var t=this.state.highlightedIndex,i=t===null?-1:t,a=0;a<n.length;a++){var u=(i+a+1)%n.length;if(this.props.isItemSelectable(n[u])){i=u;break}}i>-1&&i!==t&&this.setState({highlightedIndex:i,isOpen:!0})}},ArrowUp:function(r){r.preventDefault();var n=this.getFilteredItems(this.props);if(!!n.length){for(var t=this.state.highlightedIndex,i=t===null?n.length:t,a=0;a<n.length;a++){var u=(i-(1+a)+n.length)%n.length;if(this.props.isItemSelectable(n[u])){i=u;break}}i!==n.length&&this.setState({highlightedIndex:i,isOpen:!0})}},Enter:function(r){var n=this;if(r.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){n.refs.input.select()});else{r.preventDefault();var t=this.getFilteredItems(this.props)[this.state.highlightedIndex],i=this.props.getItemValue(t);this.setState({isOpen:!1,highlightedIndex:null},function(){n.refs.input.setSelectionRange(i.length,i.length),n.props.onSelect(i,t)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}};On.exports=Bt});var Pe=ge(Ke());var Se=ge(Ke());var le=ge(Ke()),Tn=ge(Wn());var rt=ge(Ke());var an=ge(on()),Ie=ge(Be());function qn({ingredient:e,setIngredient:r,setIngredientChanged:n}){let[t,i]=(0,rt.useState)([]),[a,u]=(0,rt.useState)(""),y=async({value:b})=>{console.log("Render CAlled..");let h=(b==null?void 0:b.length)>0?{name:{_icontains:b}}:{name:{_nempty:null}};await ve.items("new_ingredients_data").readByQuery({fields:["*"],filter:h,sort:["-date_updated","id"],limit:150}).then(s=>{i(s==null?void 0:s.data)}).catch(s=>{console.log(s)})};rt.default.useEffect(()=>{y({value:""})},[]),rt.default.useEffect(()=>{let b=setTimeout(()=>{y({value:a})},700);return()=>{clearTimeout(b)}},[a]);let g=(b,h)=>{var k;let{name:s,value:o,Item:v}=b,T=[...e];n(!0),T[h][s]=s=="name"?(k=b==null?void 0:b.value)==null?void 0:k.name:o,T[h].IndexId=h,s=="name"&&(T[h].Item1=o),r(T)},E=b=>{n(!0),r(h=>h==null?void 0:h.filter((s,o)=>o!==b))},p={menuList:b=>({...b,height:"110px","::-webkit-scrollbar":{width:"6px"},"::-webkit-scrollbar-track":{background:"#2684FF"},"::-webkit-scrollbar-thumb":{background:"#888"},"::-webkit-scrollbar-thumb:hover":{background:"#555"}}),control:(b,h)=>({...b,border:"none",marginTop:"4px",borderColor:h.isFocused?"grey":"red"})};function _({name:b},{inputValue:h}){return(0,Ie.jsx)(an.default,{searchWords:[h],textToHighlight:b,highlightClassName:"select-ingredient"})}return(0,Ie.jsx)("div",{children:e==null?void 0:e.map((b,h)=>{var s;return(0,Ie.jsxs)("div",{className:"pr-4 pl-0 data-list popauto my-2 flex flex-row justify-between",children:[(0,Ie.jsx)(rn._default,{id:"Ingredient",classNamePrefix:"cursor-pointer react-select",className:" react-select-container  border-gray-500 border-0 text-gray-900 text-sm w-1/3 min-h-[42px] flex",defaultMenuIsOpen:!1,maxMenuHeight:250,onChange:o=>g({value:o,name:"name",item:{}},h),components:{IndicatorSeparator:()=>null},hideSelectedOptions:!0,cacheOptions:!1,value:((s=b==null?void 0:b.name)==null?void 0:s.length)>0?b:"",formatOptionLabel:_,options:t==null?void 0:t.map(o=>o),getOptionLabel:o=>o.name,getOptionValue:o=>o.id,onInputChange:o=>u(o),placeholder:"S\xF8g efter ingrediens",styles:{styles1:p,control:o=>({...o,border:"none",boxShadow:"none"})}}),(0,Ie.jsxs)("div",{className:"justify-end flex flex-row ",children:[(0,Ie.jsx)("input",{name:"Value2",type:"number",onKeyDown:o=>o.key==="e"&&o.preventDefault(),placeholder:"0",value:b==null?void 0:b.Value2,onChange:o=>{var v;return g({value:(v=o==null?void 0:o.target)==null?void 0:v.value,name:"Value2"},h)},onWheel:o=>{var v;return(v=o==null?void 0:o.target)==null?void 0:v.blur()},className:"border border-[#777] border-collapse rounded-l-md justify-end  my-1 block w-1/2 py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium text-black sm:text-sm"}),(0,Ie.jsx)("span",{className:"unit-section text-center border border-black rounded-r-md my-1 p-2 border-collapse	",children:"g"})]}),(0,Ie.jsx)("div",{className:"justify-end items-end flex-row m-1",children:(0,Ie.jsx)("button",{type:"button",title:"Delete Ingredient",className:"w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent text-sm font-medium text-black shadow-sm focus:outline-none focus:ring-offset-2 sm:w-auto",onClick:()=>E(h),children:(0,Ie.jsx)("span",{children:(0,Ie.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-trash w-5 h-5",children:[(0,Ie.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,Ie.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})})})]},h)})})}var cn=qn;var Ft=ge(Ke()),Nn=ge(En());var Ae=ge(Be());function fi({lang:e,value:r,setValue:n,setAllergens:t,setDietary:i,setIngredient:a,valueEng:u,setValueEng:y,setBgRemovedImage:g}){let[E,p]=(0,Ft.useState)([]);Ft.default.useEffect(()=>{r!=null&&r.includes("@")&&b({value:r,type:e})},[r==null?void 0:r.includes("@")]);let _=()=>{let s=r==null?void 0:r.lastIndexOf("@"),o=r==null?void 0:r.substring(s+1);if(s!==-1){let v=E==null?void 0:E.filter(T=>{var k,f;return(f=(k=e?T==null?void 0:T.menu_info:T==null?void 0:T.menu_info_1)==null?void 0:k.toLowerCase())==null?void 0:f.includes(o==null?void 0:o.toLowerCase())});return v==null?void 0:v.slice(0,10)}else return[]},b=async s=>{let o=s==null?void 0:s.value,v=(s==null?void 0:s.type)==="da";if((o==null?void 0:o.includes("@"))&&o.length<=2){var T={};o.includes("@")&&o.length>=1&&(T=v?{menu_info:{_nempty:null},is_global:{_eq:!0}}:{menu_info_1:{_nempty:null},is_global:{_eq:!0}}),await ve.items("recipe_book").readByQuery({fields:["*","allergens_list.id","allergens_list.Allergens_id.*","dietary_list.id","dietary_list.Dietary_id.*","ingredients_list.*","ingredients_list.new_climate_db.*"],filter:T,sort:["id"]}).then(k=>{p(k==null?void 0:k.data)}).catch(k=>{console.log(k)})}return[]},h=(s,o)=>{var T,k,f,W;let v=e?s==null?void 0:s.menu_info:s==null?void 0:s.menu_info_1;return(0,Ae.jsxs)("div",{className:"p-2 block overflow-hidden border border-b-[#c5c5c5]",style:{background:o?"lightgray":"white"},children:[(0,Ae.jsxs)("div",{className:"float-left w-[80%] mr-2",children:[(0,Ae.jsx)("div",{children:v}),((T=s==null?void 0:s.allergens_list)==null?void 0:T.length)>0&&(0,Ae.jsxs)("div",{children:[(0,Ae.jsxs)("span",{className:" font-bold",children:[e?Jr:Qr,": "]}),(k=s==null?void 0:s.allergens_list)==null?void 0:k.map((j,oe)=>{var L,ee;return`${(L=j==null?void 0:j.Allergens_id)==null?void 0:L[e?"name":"translated_name"]}${oe!==((ee=s==null?void 0:s.allergens_list)==null?void 0:ee.length)-1?", ":""}`})]}),((f=s==null?void 0:s.dietary_list)==null?void 0:f.length)>0&&(0,Ae.jsxs)("div",{children:[(0,Ae.jsxs)("span",{className:" font-bold",children:[e?Rt:Gr,": "]}),(W=s==null?void 0:s.dietary_list)==null?void 0:W.map((j,oe)=>{var L,ee;return`${(L=j==null?void 0:j.Dietary_id)==null?void 0:L[e?"name":"translated_name"]}${oe!==((ee=s==null?void 0:s.dietary_list)==null?void 0:ee.length)-1?", ":""}`})]})]}),(s==null?void 0:s.app_resultant_image)!==null&&(0,Ae.jsx)("div",{className:"float-right w-[75px] text-right",children:(0,Ae.jsx)("img",{src:Ct(s==null?void 0:s.app_resultant_image),alt:"dish",style:{width:"60px",height:"60px"}})})]},s==null?void 0:s.id)};return(0,Ae.jsx)("div",{className:"w-full",children:(0,Ae.jsx)(Nn.default,{wrapperStyle:{width:"100%"},getItemValue:s=>JSON.stringify(s),items:_(),renderItem:h,value:r,onChange:s=>{var o;return n((o=s==null?void 0:s.target)==null?void 0:o.value)},onSelect:s=>{var oe,L,ee;let o=JSON.parse(s);t((oe=o==null?void 0:o.allergens_list)==null?void 0:oe.map(Y=>{var ue;return(ue=Y==null?void 0:Y.Allergens_id)==null?void 0:ue.id})),i((L=o==null?void 0:o.dietary_list)==null?void 0:L.map(Y=>{var ue;return(ue=Y==null?void 0:Y.Dietary_id)==null?void 0:ue.id})),a((ee=o==null?void 0:o.ingredients_list)==null?void 0:ee.map((Y,ue)=>{var N;return{name:(N=Y==null?void 0:Y.new_climate_db)==null?void 0:N.name,Value2:Y==null?void 0:Y.unit,item:Y,Item1:Y==null?void 0:Y.new_climate_db,IndexId:ue,prev1:Y==null?void 0:Y.new_climate_db,prev2:Y==null?void 0:Y.unit}}));let v=e?o==null?void 0:o.menu_info:o==null?void 0:o.menu_info_1,T=v==null?void 0:v.lastIndexOf("@"),k=(v==null?void 0:v.substring(0,T+1))+(v==null?void 0:v.substring(T+1,v==null?void 0:v.length));n(k);let f=e?o==null?void 0:o.menu_info_1:o==null?void 0:o.menu_info,W=v==null?void 0:v.lastIndexOf("@"),j=(f==null?void 0:f.substring(0,W+1))+(f==null?void 0:f.substring(W+1,f==null?void 0:f.length));y(j),(o==null?void 0:o.app_resultant_image)!==null&&g({img:o==null?void 0:o.app_resultant_image,type:"id",update:!0})},renderInput:s=>(0,Ae.jsx)("textarea",{...s,onKeyDown:o=>{}}),menuStyle:{backgroundColor:"black",position:"absolute",top:"50px",left:"0",zIndex:20,maxHeight:"300px",overflowY:"auto",width:"100%",display:`${r!=null&&r.includes("@")?"block":"none"}`},inputProps:{style:{width:"100%",height:"70px",resize:"unset"},placeholder:"Add meal..."}})})}var it=fi;var O=ge(Be()),pi=le.default.forwardRef((e,r)=>{var Jt,Zt,Mt,er,tr,rr,nr,ir,lr,sr,or,ar,cr,ur,dr,fr,pr,hr,mr,gr,vr,yr,_r,br,xr,wr,Sr,Or,Er,Nr,Tr,Ir,kr,Ar;let{setIsOpenv:n,station:t,editContent:i,existingTableData:a,indexValue:u,stationColor:y,EnTitle:g,DkTitle:E,dkMenu:p,enMenu:_,allergensList:b,dietaryList:h,ingredientsList:s,setIngredientsList:o,portionsProducedValue:v,portionsSoldValue:T,totalCalorie:k,menuId:f,stationId:W,stationName:j}=e,oe={email:(Jt=i==null?void 0:i.currentUser)==null?void 0:Jt.email,password:(Zt=i==null?void 0:i.currentUser)==null?void 0:Zt.password_copy},L=(t==null?void 0:t.app_resultant_image)!==null?{img:(Mt=t==null?void 0:t.app_resultant_image)==null?void 0:Mt.id,type:"id",update:!0}:((tr=(er=t==null?void 0:t.recipe_id)==null?void 0:er.app_resultant_image)==null?void 0:tr.id)!==void 0?{img:(nr=(rr=t==null?void 0:t.recipe_id)==null?void 0:rr.app_resultant_image)==null?void 0:nr.id,type:"id",update:!0}:"",[ee,Y]=(0,le.useState)(!!n),[ue,N]=(0,le.useState)(!1),[$,de]=(0,le.useState)(s),[Oe,G]=(0,le.useState)(!1),[_e,ne]=(0,le.useState)(v),[be,Ne]=(0,le.useState)(T),[we,x]=(0,le.useState)(!1),[S,q]=(0,le.useState)(p),[B,D]=(0,le.useState)(""),[K,X]=(0,le.useState)(""),[I,z]=(0,le.useState)(L),[F,J]=(0,le.useState)("day"),[U,ce]=(0,le.useState)(_),[C,Re]=(0,le.useState)("Ingredienslist"),Ce=["sesame","gluten","soy","mustard","nuts","egg","fish","celery","mollusks","milk","crustacea","lupine","peanuts","sulfur dioxide"],Ee=100,De=14,He=8,Je="da",pt="en",ht=5e6,mt={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0px",width:"96%",maxHeight:"90vh"}},[he,We]=(0,le.useState)(b),[me,Ue]=(0,le.useState)(h),[Ze,Me]=(0,le.useState)(!1),[gt,lt]=(0,le.useState)(!1),Le=(sr=(lr=(ir=i==null?void 0:i.getAllStations)==null?void 0:ir.filter(l=>(l==null?void 0:l.station_unique_id)===(W==null?void 0:W.uniqueId)))==null?void 0:lr[0])==null?void 0:sr.parent_id,vt=()=>{let l=[];s==null||s.map(d=>{var m;return l.push({IndexId:d==null?void 0:d.IndexId,Item1:d==null?void 0:d.prev1,name:(m=d==null?void 0:d.prev1)==null?void 0:m.name,Value2:d==null?void 0:d.prev2,item:d==null?void 0:d.item,prev1:d==null?void 0:d.prev1,prev2:d==null?void 0:d.prev2})}),o(l),n(!1),Y(!1)},st=le.default.useRef(!0);async function yt(l){try{let d=`${Dr}/language/translate/v2?key=${Hr}`;return d+="&q="+Zr(l),d+=`&source=${Je}`,d+=`&target=${pt}`,(await fetch(d,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}})).json()}catch{x(!0)}}(0,le.useLayoutEffect)(()=>{if(st.current){st.current=!1;return}if((S==null?void 0:S.length)>Ee)q(S==null?void 0:S.substring(0,Ee));else{let l=()=>{yt(S).then(m=>{var P,w,V,H,A,Z,te;return m!=null&&m.data?ce((te=(Z=(A=Mr((H=(V=(w=(P=m==null?void 0:m.data)==null?void 0:P.translations)==null?void 0:w[0])==null?void 0:V.translatedText)==null?void 0:H.replaceAll("%","%25")))==null?void 0:A.replaceAll("&#39;","'"))==null?void 0:Z.substring(0,Ee))!=null?te:""):x(!0)}).catch(m=>console.log(m))},d=setTimeout(()=>{l()},1e3);return()=>{clearTimeout(d)}}},[S.length]),(0,le.useEffect)(()=>{(U==null?void 0:U.length)>Ee&&ce(U==null?void 0:U.substring(0,Ee))},[U.length]),((or=K==null?void 0:K.trim())==null?void 0:or.length)>0&&setTimeout(()=>{X("")},5e3),(0,le.useEffect)(()=>{Oe&&ot()},[$]);let $e=0,Ve=0;($==null?void 0:$.length)>0&&($==null||$.map(l=>{var d,m,P,w,V,H,A,Z;return((d=l==null?void 0:l.Item1)==null?void 0:d.CO2e)!=null&&((m=l==null?void 0:l.Item1)==null?void 0:m.CO2e)!=null&&console.log("e?.Item1?.CO2e ::",(P=l==null?void 0:l.Item1)==null?void 0:P.CO2e)(Ve=Number((w=l==null?void 0:l.Item1)==null?void 0:w.CO2e)/1e3*Number(l==null?void 0:l.Value2)+Ve),((V=l==null?void 0:l.Item1)==null?void 0:V.energy)!=null&&((H=l==null?void 0:l.Item1)==null?void 0:H.energy)!=null&&console.log("e?.Item1?.CO2e ::",(A=l==null?void 0:l.Item1)==null?void 0:A.energy)($e=Number((Z=l==null?void 0:l.Item1)==null?void 0:Z.energy)/100*.239006*Number(l==null?void 0:l.Value2)+$e),""}));let _t=l=>{he.indexOf(l)==-1?(he==null?void 0:he.length)<De&&We([...he,l]):We(he.filter(d=>d!=l))},ot=()=>{let l=[];$==null||$.map(d=>{Ce==null||Ce.map(m=>{var P,w,V,H;if(["ja","spor af","afledt af"].includes((P=d==null?void 0:d.Item1[m])==null?void 0:P.toLowerCase())){let A=(H=(V=(w=i==null?void 0:i.getAllAllergens)==null?void 0:w.data)==null?void 0:V.filter(Z=>{var te;return((te=Z==null?void 0:Z.translated_name)==null?void 0:te.toLowerCase())===(m==="egg"?"eggs":m)})[0])==null?void 0:H.id;!l.some(Z=>Z===A)&&(l==null||l.push(A))}})}),We(l)},bt=l=>{me.indexOf(l)==-1?(me==null?void 0:me.length)<He&&Ue([...me,l]):Ue(me.filter(d=>d!=l))},xt=()=>{de([...$,{name:"",Value2:"",Item1:{},IndexId:""}])},wt=()=>(0,O.jsxs)("div",{className:"tab-section-data",children:[($==null?void 0:$.length)>0&&(0,O.jsx)("span",{className:"tab-ingredients block text-sm text-[#777] py-2",children:"Ingredienser"}),(0,O.jsx)(cn,{ingredient:$,setIngredient:de,autoAddAllergence:ot,setIngredientChanged:G}),(0,O.jsx)("div",{className:"flex gap-3 my-3",children:(0,O.jsxs)("button",{onClick:()=>xt(),className:"w-20 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-start text-primary text-sm font-medium",children:[(0,O.jsxs)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"#023937",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:"css-i6dzq1 mr-1",children:[(0,O.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,O.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add"]})})]}),St=()=>{var l,d;return(0,O.jsxs)("div",{className:"py-4",children:[(t==null?void 0:t.is_parent_station)!==!0?(0,O.jsx)("ul",{className:"lists flex flex-wrap gap-2 grid-cols-8 sm:grid-cols-6 md:grid-cols-8 1xl:grid-cols-6 max-w-[70%]",children:(d=(l=i==null?void 0:i.getAllAllergens)==null?void 0:l.data)==null?void 0:d.map((m,P)=>(0,O.jsx)("li",{onClick:()=>_t(m==null?void 0:m.id),className:`list cursor-pointer text-center text-xs px-3 py-1 rounded-[24px] border ${he!=null&&he.some(w=>w==(m==null?void 0:m.id))?"bg-primary text-white":null} border-primary col-span-4 sm:col-span-2 md:col-span-1 lg:col-span-2 1xl:col-span-1 font-normal`,children:m==null?void 0:m.name},P))}):null,(he==null?void 0:he.length)>=De&&(0,O.jsx)("div",{className:"text-red-500 text-sm text-right",children:`*Maximum ${De} allergener are allowed.`})]})},Ot=()=>{var l,d;return(0,O.jsxs)("div",{className:"py-4",children:[(t==null?void 0:t.is_parent_station)!==!0?(0,O.jsx)("ul",{className:"lists flex flex-wrap gap-2 grid-cols-8 sm:grid-cols-6 md:grid-cols-8 1xl:grid-cols-6 max-w-[70%]",children:(d=(l=i==null?void 0:i.getAllDietary)==null?void 0:l.data)==null?void 0:d.map((m,P)=>(0,O.jsx)("li",{onClick:()=>bt(m==null?void 0:m.id),className:`list cursor-pointer text-center text-xs px-3 py-1 rounded-[24px] border ${me!=null&&me.some(w=>w==(m==null?void 0:m.id))?"bg-primary text-white":null} border-primary col-span-4 sm:col-span-2 md:col-span-1 lg:col-span-2 1xl:col-span-1 font-normal`,children:m==null?void 0:m.name},P))}):null,(me==null?void 0:me.length)>=He&&(0,O.jsx)("div",{className:"text-red-500 text-sm text-right",children:`*Maximum ${He} kostpr\xE6ferencer are allowed.`})]})},Et=l=>{var w;lt(!0);let d=(w=l==null?void 0:l.target)==null?void 0:w.files[0],m=new FileReader;m.readAsDataURL(d);let P="";m.onload=async()=>{P=m.result,D({success:"Image is processing wait for few seconds."}),(d==null?void 0:d.size)>ht?D({err:"Uploaded image file size should not exceeds 5MB"}):await Nt({img:m.result,type:"base64"}),lt(!1)},l.target.value=null},Nt=async({img:l})=>{var d=new FormData;d.append("image",l),l&&await fetch(`${$t}/crop`,{method:"POST",body:d}).then(m=>m.ok?m.blob():m.json()).then(m=>{if((m==null?void 0:m.error)==!0)return D({err:(m==null?void 0:m.code)=="unknown_foreground"?"The captured image doesn't have a valid object after the image background removal process. Kindly retry with a different object.":(m==null?void 0:m.code)=="insufficient_credits"?"Insufficient credits to remove the background for the captured Image. Please contact the system administrator for more details.":"Something went wrong. Please try again later"}),"";let P=new FileReader;P.onloadend=()=>(z({img:P.result,type:"base64"}),D(""),P.result),P.readAsDataURL(m)}).catch(m=>{console.log(m,"error"),D({err:"Something went wrong, try again later"})})},Tt=async()=>{await ve.items("screen_display").readByQuery({fields:["*","app_resultant_image.*","recipe_id.app_resultant_image.*"],filter:{date:{_eq:i==null?void 0:i.date},location_id:{_eq:i==null?void 0:i.locationId},station_name:{station_unique_id:{_eq:W==null?void 0:W.uniqueId}}}}).then(l=>{var d,m,P,w;(m=(d=l==null?void 0:l.data[0])==null?void 0:d.app_resultant_image)!=null&&m.id?z({img:(w=(P=l==null?void 0:l.data[0])==null?void 0:P.app_resultant_image)==null?void 0:w.id,type:"id",update:!0}):X("No updated image found in the station for the day.")}).catch(l=>console.log(l))},It=()=>(0,O.jsxs)("div",{className:"py-4",children:[(0,O.jsx)("div",{className:"upload-section !bg-[#E3E3AD33]",children:(0,O.jsx)("div",{className:"text-center absolute",children:I!=null&&I.img?(0,O.jsx)("img",{src:(I==null?void 0:I.type)=="id"?Ct(I==null?void 0:I.img):I==null?void 0:I.img,alt:"uploaded",className:"w-[132px] h-[88px] z-20 object-contain"}):(0,O.jsx)("i",{className:"ri-add-fill color-primary mr-0"})})}),(B==null?void 0:B.err)&&(0,O.jsx)("span",{className:"text-red-600 flex text-sm",children:B==null?void 0:B.err}),(K==null?void 0:K.length)>0&&(0,O.jsx)("span",{className:"text-red-600 flex text-sm",children:K}),(B==null?void 0:B.success)&&(0,O.jsx)("span",{className:"text-primary flex text-sm",children:B==null?void 0:B.success}),(0,O.jsxs)("div",{className:"w-full text-primary text-xs mt-1",children:[(0,O.jsxs)("label",{htmlFor:"files",className:"btn cursor-pointer text-primary",children:[(0,O.jsx)("i",{className:"ri-add-fill color-primary mr-2"}),"Upload Image"]}),(0,O.jsx)("input",{id:"files",type:"file",style:{display:"none",visibility:"hidden"},accept:"image/*",className:"mt-1 border bg-white border-gray-300 px-4 py-1.5 h-9 flex text-black text-xs font-bold justify-center items-center w-full focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",onChange:l=>Et(l)})]}),(0,O.jsxs)("div",{className:"cursor-pointer text-primary text-xs mt-2",onClick:l=>N(!ue),children:[(0,O.jsx)("i",{className:"ri-eye-line"})," Preview"]}),(0,O.jsx)("div",{className:"cursor-pointer text-primary text-xs mt-2 underline",onClick:()=>Tt(),children:"Get updated image"})]}),at=async({menuInfo:l,translatedMenuInfo:d,allergensList:m,dietaryList:P,ingredientList:w,imageId:V,co2:H,calorie:A})=>{var M,pe;let Z={menu_info:{_eq:l==null?void 0:l.trim()},is_global:{_eq:!0}};return((M=l==null?void 0:l.trim())==null?void 0:M.length)>0||((pe=d==null?void 0:d.trim())==null?void 0:pe.length)>0||(m==null?void 0:m.length)>0||(P==null?void 0:P.length)>0||(w==null?void 0:w.length)>0?await ve.items("recipe_book").readByQuery({fields:["*","allergens_list.id","allergens_list.Allergens_id.*","dietary_list.id","dietary_list.Dietary_id.*","ingredients_list.*","ingredients_list.new_climate_db.*"],filter:Z,sort:["id"]}).then(async re=>{var ze,ke,ae,ut,tt;let xe=[];(ze=re==null?void 0:re.data)==null||ze.map(Te=>{var Pr,Rr,Cr,Lr;let Fn=((Pr=Te==null?void 0:Te.menu_info)==null?void 0:Pr.trim())===(l==null?void 0:l.trim())&&((Rr=Te==null?void 0:Te.menu_info_1)==null?void 0:Rr.trim())===(d==null?void 0:d.trim()),vi=(JSON==null?void 0:JSON.stringify(((Cr=Te==null?void 0:Te.allergens_list)==null?void 0:Cr.length)>0?(Lr=Te==null?void 0:Te.allergens_list)==null?void 0:Lr.map(Ht=>{var jr;return(jr=Ht==null?void 0:Ht.Allergens_id)==null?void 0:jr.id}):-1))===JSON.stringify((m==null?void 0:m.length)>0?m:-1);return xe==null||xe.push(Fn?"true":"false"),""});let ie=xe!=null&&xe.includes("true")?xe==null?void 0:xe.findIndex(Te=>Te=="true"):-1;return ie!==-1&&F!=="day"&&await kt({id:(ke=re==null?void 0:re.data[ie])==null?void 0:ke.id,values:w}),ie!==-1&&(f==null?void 0:f.recipeId)!==((ae=re==null?void 0:re.data[ie])==null?void 0:ae.id)&&await ct({menuInfo:l,translatedMenuInfo:d,Id:(ut=re==null?void 0:re.data[ie])==null?void 0:ut.id,allergensList:m,dietaryList:P,imageId:V,co2:H,calorie:A}),ie!==-1?(tt=re==null?void 0:re.data[ie])==null?void 0:tt.id:-1}).catch(re=>{console.log(re)}):-1},ct=async({Id:l,allergensList:d,dietaryList:m,imageId:P,co2:w,calorie:V})=>{var A,Z,te;let H={menu_info:S==null?void 0:S.trim(),menu_info_1:U==null?void 0:U.trim(),allergens_list:(A=d==null?void 0:d.filter(M=>M!=null))==null?void 0:A.map(M=>({Allergens_id:{id:M}})),dietary_list:(Z=m==null?void 0:m.filter(M=>M!=null))==null?void 0:Z.map(M=>({Dietary_id:{id:M}})),is_global:F!=="day",total_co2:w,total_calories:V};await((te=ve.items("recipe_book"))==null?void 0:te.updateOne(l,P===null?H:{...H,app_resultant_image:P}).then(M=>M==null?void 0:M.id))},c=async({menuInfo:l,translatedMenuInfo:d,allergensList:m,dietaryList:P,ingredientList:w,calorie:V,co2:H,imageId:A})=>{var te,M,pe;let Z=F==="day"?-1:await at({menuInfo:l,translatedMenuInfo:d,allergensList:m,dietaryList:P,ingredientList:w,imageId:A,co2:H,calorie:V});if(Z!==-1)return Z;{let re={menu_info:l==null?void 0:l.trim(),menu_info_1:d==null?void 0:d.trim(),allergens_list:(te=m==null?void 0:m.filter(ie=>ie!=null))==null?void 0:te.map(ie=>({Allergens_id:{id:ie}})),dietary_list:(M=P==null?void 0:P.filter(ie=>ie!=null))==null?void 0:M.map(ie=>({Dietary_id:{id:ie}})),total_co2:H,total_calories:V,is_global:F!=="day"},xe=await((pe=ve.items("recipe_book"))==null?void 0:pe.createOne(A===null?re:{...re,app_resultant_image:A}).then(ie=>ie==null?void 0:ie.id).catch(ie=>{console.log(ie,"error")}));return await kt({id:xe,values:w,create:!0}),xe}},R=async({menuInfo:l,translatedMenuInfo:d,allergensList:m,dietaryList:P,ingredientList:w,calorie:V,co2:H,imageId:A,portionsProduced:Z,portionsSold:te})=>{var pe,re,xe;let M=await c({menuInfo:l,translatedMenuInfo:d,allergensList:m,dietaryList:P,ingredientList:w,calorie:V,co2:H,imageId:A});M>0&&await((xe=ve.items("screen_display"))==null?void 0:xe.createOne({date:i==null?void 0:i.date,location_id:(re=(pe=i==null?void 0:i.currentUser)==null?void 0:pe.selected_locations)==null?void 0:re.id,station_name:W==null?void 0:W.stationId,recipe_id:M,portions_produced:Z,portions_sold:te}).then(ie=>{localStorage.setItem("MenuSave",`${F==="day"?"create":"edit"}`),location.reload()}).catch(ie=>{console.log(ie,"error")}))},je=async l=>await ve.items("screen_display").readByQuery({fields:["*"],filter:{recipe_id:{id:{_eq:l}}},meta:["filter_count"]}).then(m=>{var P;return((P=m==null?void 0:m.meta)==null?void 0:P.filter_count)>1}),Pn=async({menuInfo:l,translatedMenuInfo:d,allergensList:m,dietaryList:P,ingredientList:w,calorie:V,co2:H,imageId:A,portionsProduced:Z,portionsSold:te})=>{var M,pe,re,xe,ie;if(F==="day")if(f!=null&&f.recipeId?await je(f==null?void 0:f.recipeId):!0){let ke=await c({menuInfo:l,translatedMenuInfo:d,allergensList:m,dietaryList:P,ingredientList:w,calorie:V,co2:H,imageId:A});if(ke>0){let ae={recipe_id:ke,portions_produced:Z,portions_sold:te};await qe({Ids:[f==null?void 0:f.menu],body:A===null?ae:{...ae,app_resultant_image:A}})}}else await kt({id:f==null?void 0:f.recipeId,values:w}),await ct({menuInfo:l,translatedMenuInfo:d,Id:f==null?void 0:f.recipeId,allergensList:m,dietaryList:P,imageId:A,co2:H,calorie:V}),A!==null&&(L==null?void 0:L.img)!==A?await qe({Ids:[t==null?void 0:t.id],body:{app_resultant_image:A,portions_produced:Z,portions_sold:te}}):await qe({Ids:[t==null?void 0:t.id],body:{portions_produced:Z,portions_sold:te}});else{let ze=await at({menuInfo:l,translatedMenuInfo:d,allergensList:m,dietaryList:P,ingredientList:w,imageId:A,co2:H,calorie:V});if(ze!==-1&&(f==null?void 0:f.recipeId)!==ze)if((f==null?void 0:f.recipeId)===void 0)await qe({Ids:[f==null?void 0:f.menu],body:{recipe_id:ze,portions_produced:Z,portions_sold:te}});else{let ke=await ve.items("screen_display").readByQuery({fields:["id"],filter:{location_id:(pe=(M=i==null?void 0:i.currentUser)==null?void 0:M.selected_locations)==null?void 0:pe.id,recipe_id:{_eq:f==null?void 0:f.recipeId}}}).then(ae=>{var ut;return(ut=ae==null?void 0:ae.data)==null?void 0:ut.map(tt=>tt==null?void 0:tt.id)}).catch(ae=>console.log(ae));(ke==null?void 0:ke.length)>0&&await qe({Ids:ke,body:{recipe_id:ze,portions_produced:Z,portions_sold:te}}),A!==null&&(L==null?void 0:L.img)!==A&&await qe({Ids:[t==null?void 0:t.id],body:{app_resultant_image:A,portions_produced:Z,portions_sold:te}})}else{let ke={menu_info:l,menu_info_1:d,allergens_list:(re=m==null?void 0:m.filter(ae=>ae!=null))==null?void 0:re.map(ae=>({Allergens_id:{id:ae}})),dietary_list:(xe=P==null?void 0:P.filter(ae=>ae!=null))==null?void 0:xe.map(ae=>({Dietary_id:{id:ae}})),total_co2:H,total_calories:V,is_global:!0};await((ie=ve.items("recipe_book"))==null?void 0:ie.updateOne(f==null?void 0:f.recipeId,A===null?ke:{...ke,app_resultant_image:A}).then(ae=>ae==null?void 0:ae.id).catch(ae=>{console.log(ae,"error")})),await kt({id:f==null?void 0:f.recipeId,values:w}),A!==null&&(L==null?void 0:L.img)!==A?await qe({Ids:[t==null?void 0:t.id],body:{app_resultant_image:A,portions_produced:Z,portions_sold:te}}):await qe({Ids:[t==null?void 0:t.id],body:{portions_produced:Z,portions_sold:te}})}}localStorage.setItem("MenuSave",`${F==="day"?"create":"edit"}`),location.reload()},qe=async({Ids:l,body:d})=>{var m;await((m=ve.items("screen_display"))==null?void 0:m.updateMany(l,d).then(P=>{}).catch(P=>{console.log(P)}))},Rn=async l=>{var d,m,P;if(Me(!0),(d=$==null?void 0:$.map(w=>{var V,H;return((H=(V=w==null?void 0:w.name)==null?void 0:V.trim())==null?void 0:H.length)>0}))!=null&&d.includes(!1))Xe.error("Please select a valid ingredient name"),Me(!1);else if(!((m=$==null?void 0:$.map(w=>{var V,H;return((H=(V=w==null?void 0:w.Value2)==null?void 0:V.trim())==null?void 0:H.length)>0}))!=null&&m.includes(!1))&&!((P=$==null?void 0:$.map(w=>{var V;return Number((V=w==null?void 0:w.Value2)==null?void 0:V.trim())>0}))!=null&&P.includes(!1))){let w=[];$==null||$.map(A=>{var Z;return w.push({IndexId:A==null?void 0:A.IndexId,Item1:A==null?void 0:A.Item1,name:(Z=A==null?void 0:A.Item1)==null?void 0:Z.name,Value2:A==null?void 0:A.Value2,item:A==null?void 0:A.item,prev1:A==null?void 0:A.Item1,prev2:A==null?void 0:A.Value2})});let V=await Ln(),H=(I==null?void 0:I.img)!==void 0?(I==null?void 0:I.update)!==!0?await Cn({token:V,img:I==null?void 0:I.img}):{id:I==null?void 0:I.img}:null;(f==null?void 0:f.menu)!==void 0?await Pn({menuInfo:S,translatedMenuInfo:U,allergensList:he,dietaryList:me,ingredientList:w,calorie:$e,co2:Ve,imageId:H==null?void 0:H.id,portionsProduced:_e,portionsSold:be}):await R({menuInfo:S,translatedMenuInfo:U,allergensList:he,dietaryList:me,ingredientList:w,calorie:$e,co2:Ve,imageId:H==null?void 0:H.id,portionsProduced:_e,portionsSold:be})}else Xe.error("Please enter a valid ingredient usage (in g)."),Me(!1)},Cn=async({token:l,img:d})=>{var m={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiURL:`${Wt}/files`,apiToken:l,base64data:`${d}`})};let P=await fetch(`${$t}/image-convert`,m).then(w=>w.json()).then(w=>w).catch(w=>(console.log("error",w),w));return P!=null&&P.id?P:null},Ln=async()=>await fetch(`${Wt}/auth/login`,{method:"POST",body:JSON.stringify({email:oe==null?void 0:oe.email,password:oe==null?void 0:oe.password}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(d=>d.json()).then(async d=>{var m;return(m=d==null?void 0:d.data)==null?void 0:m.access_token}),kt=async l=>{let d=l==null?void 0:l.values;var m=[];await ve.items("ingredients_and_units").readByQuery({fields:["*.*.*"],filter:{recipe_id:{_eq:l==null?void 0:l.id}}}).then(async w=>{var A,Z,te;var V=((A=w==null?void 0:w.data)==null?void 0:A.length)>0&&((te=(Z=w==null?void 0:w.data)==null?void 0:Z.filter(M=>!(d!=null&&d.find(pe=>{var re;return((re=pe==null?void 0:pe.item)==null?void 0:re.id)===(M==null?void 0:M.id)}))))==null?void 0:te.map(M=>M));let H=(V==null?void 0:V.length)>0&&(V==null?void 0:V.map(M=>M==null?void 0:M.id));(H==null?void 0:H.length)>0&&await ve.items("ingredients_and_units").deleteMany(H)}).catch(w=>{console.log(w)});let P=d==null?void 0:d.filter(w=>!(m!=null&&m.find(V=>{var H,A;return((H=w==null?void 0:w.Item1)==null?void 0:H.id)===((A=V==null?void 0:V.new_climate_db)==null?void 0:A.id)})));(P==null?void 0:P.length)>0&&(P==null||P.map(async w=>{var Z,te,M;let[V,H,A]=[l==null?void 0:l.id,(Z=w==null?void 0:w.Item1)==null?void 0:Z.id,w==null?void 0:w.Value2];(w==null?void 0:w.item)===void 0||(l==null?void 0:l.create)===!0?await((te=ve.items("ingredients_and_units"))==null?void 0:te.createOne({new_climate_db:H,recipe_id:V,unit:A}).then(pe=>{}).catch(pe=>{console.log(pe,"error")})):await ve.items("ingredients_and_units").updateOne((M=w==null?void 0:w.item)==null?void 0:M.id,{new_climate_db:H,unit:A}).then(pe=>{}).catch(pe=>{console.log(pe)})}))},jn=(ur=(cr=(ar=i==null?void 0:i.getAllAllergens)==null?void 0:ar.data)==null?void 0:cr.filter(l=>he==null?void 0:he.some(d=>d==(l==null?void 0:l.id))))==null?void 0:ur.map(l=>({Allergens_id:l})),Bn=(pr=(fr=(dr=i==null?void 0:i.getAllDietary)==null?void 0:dr.data)==null?void 0:fr.filter(l=>me==null?void 0:me.some(d=>d==(l==null?void 0:l.id))))==null?void 0:pr.map(l=>({Dietary_id:l})),et=(hr=Le==null?void 0:Le.station_name_translation)==null?void 0:hr.filter(l=>{var d,m;return(l==null?void 0:l.location_id)==((m=(d=i==null?void 0:i.currentUser)==null?void 0:d.selected_locations)==null?void 0:m.id)}),Dt=((gr=(mr=et==null?void 0:et[0])==null?void 0:mr.name)==null?void 0:gr.length)>0?(vr=et==null?void 0:et[0])==null?void 0:vr.name:Le==null?void 0:Le.station_name;return(0,O.jsxs)("div",{className:"w-100,h-100",children:[(0,O.jsx)(Tn.default,{isOpen:ee,style:mt,ariaHideApp:!1,contentLabel:"Banner Preview",children:(0,O.jsxs)("div",{className:"px-12 py-12 w-full relative lg:px-9 station-preview bg-[#F8F8F8]",children:[(0,O.jsxs)("div",{className:"font-normal text-primary flex flex-col text-center pt-10",children:[(0,O.jsx)("span",{className:"font-bold w-full",children:"Build A Recipe"}),(0,O.jsxs)("span",{className:"font-normal w-full uppercase",children:[(Dt==null?void 0:Dt.length)>0?(Le==null?void 0:Le.station_name)+" - ":"",j]})]}),(0,O.jsx)("div",{className:"ml-10 font-normal text-primary",onClick:vt,children:(0,O.jsxs)("span",{className:"left-0 font-normal text-sm cursor-pointer",children:[(0,O.jsx)("i",{className:"ri-arrow-left-line mr-1 relative top-[2px]"})," ","Back to Menu of The day"]})}),(0,O.jsxs)("div",{className:"p-10",children:[(0,O.jsx)("div",{className:"editmenuitem pb-[20px] mt-5 max-w-[70%]",children:(0,O.jsxs)("div",{className:"card w-full flex flex-row gap-5",children:[(0,O.jsxs)("div",{className:"card col-span-12 md:col-span-12 lg:col-span-4 mb-4 w-full",children:[(0,O.jsx)("div",{className:"mb-2",children:E()}),((yr=t==null?void 0:t.station_name)==null?void 0:yr.is_parent_station)!==!0?(0,O.jsxs)("div",{className:`border bg-white relative border-${(S==null?void 0:S.length)<=Ee?"gray":"red"}-300 border-l-8 border-l-[#B6D989] px-3 pl-2 py-2`,style:{borderLeftColor:(br=y[u])!=null?br:(_r=y==null?void 0:y.slice(-1))==null?void 0:_r[0],borderLeftWidth:"6px"},children:[(0,O.jsx)(it,{lang:!0,value:S,setValue:q,valueEng:U,setValueEng:ce,setAllergens:We,setDietary:Ue,setIngredient:de,setBgRemovedImage:z}),(0,O.jsxs)("span",{className:"block text-xs text-[#AAA8A8] font-medium",children:[S==null?void 0:S.length,"/",Ee,"characters"]})]}):null]}),(0,O.jsxs)("div",{className:"card col-span-12 md:col-span-12 lg:col-span-4 mb-4 w-full",children:[(0,O.jsx)("div",{className:"mb-2",children:g()}),((xr=t==null?void 0:t.station_name)==null?void 0:xr.is_parent_station)!==!0?(0,O.jsxs)("div",{className:`border bg-white relative border-${(U==null?void 0:U.length)<=Ee?"gray":"red"}-300 border-l-8 border-l-[#B6D989] px-3 pl-2 py-2`,style:{borderLeftColor:(Sr=y[u])!=null?Sr:(wr=y==null?void 0:y.slice(-1))==null?void 0:wr[0],borderLeftWidth:"6px"},children:[(0,O.jsx)(it,{lang:!1,value:U,setValue:ce,valueEng:S,setValueEng:q,setAllergens:We,setDietary:Ue,setIngredient:de,setBgRemovedImage:z}),(0,O.jsxs)("span",{className:"block text-xs text-[#AAA8A8] font-medium",children:[U==null?void 0:U.length,"/",Ee," characters"]})]}):null]})]})}),(0,O.jsx)("div",{className:"portions-tabs flex flex-row max-w-[70%]",children:(0,O.jsxs)("div",{className:"w-full flex flex-row gap-5",children:[(0,O.jsx)("div",{className:"w-[50%]",children:(0,O.jsxs)("div",{className:"w-full flex flex-row items-center",children:[(0,O.jsx)("label",{htmlFor:"portions_produced",className:"mr-3",children:"Portions Produced"}),(0,O.jsx)("input",{name:"portions_produced",type:"number",onKeyDown:l=>l.key==="e"&&l.preventDefault(),placeholder:"0",value:_e,onChange:l=>{var d;return ne((d=l==null?void 0:l.target)==null?void 0:d.value)},onWheel:l=>{var d;return(d=l==null?void 0:l.target)==null?void 0:d.blur()},className:"border border-[#777] border-collapse rounded-md justify-end  my-1 block w-1/2 max-w-[100px] py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium text-black sm:text-sm"})]})}),(0,O.jsx)("div",{className:"w-[50%]",children:(0,O.jsxs)("div",{className:"w-full flex flex-row items-center",children:[(0,O.jsx)("label",{htmlFor:"portions_sold",className:"mr-3",children:"Portions Sold"}),(0,O.jsx)("input",{name:"protions_sold",type:"number",onKeyDown:l=>l.key==="e"&&l.preventDefault(),placeholder:"0",value:be,onChange:l=>{var d;return Ne((d=l==null?void 0:l.target)==null?void 0:d.value)},onWheel:l=>{var d;return(d=l==null?void 0:l.target)==null?void 0:d.blur()},className:"border border-[#777] border-collapse rounded-md justify-end  my-1 block w-1/2 max-w-[100px] py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium text-black sm:text-sm"})]})})]})}),(0,O.jsxs)("div",{className:"ingredients-tabs pt-8 ",children:[(0,O.jsx)("div",{className:"tabs",children:(0,O.jsx)("ul",{className:"inline-flex tabs-section",children:["Ingredienslist","Allergener","Kostpr\xE6ferencer","Billede"].map((l,d)=>(0,O.jsx)("li",{onClick:()=>Re(l),className:`${C==l&&"active"} font-normal text-sm`,children:(0,O.jsx)("span",{children:l})},d))})}),(0,O.jsx)("div",{className:"tabs-section-content px-5 pt-[15px] pb-[25px] bg-white border border-[#C5C5C5]",children:C=="Ingredienslist"?wt():C=="Allergener"?St():C=="Kostpr\xE6ferencer"?Ot():It()})]}),(0,O.jsxs)("div",{className:"flex flex-col justify-end mt-5",children:[(0,O.jsxs)("div",{className:"flex justify-end text-black text-sm items-center mb-2",children:[(0,O.jsx)("input",{type:"checkbox",value:"global",checked:F==="global",onChange:()=>J("global"),className:"mr-2 w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2"}),"Apply changes to",(0,O.jsx)("p",{children:(0,O.jsx)("span",{className:"font-bold ml-1",children:"global recipe "})})]}),(0,O.jsxs)("div",{className:"flex justify-end text-black text-sm items-center",children:[(0,O.jsx)("input",{type:"checkbox",value:"day",checked:F==="day",onChange:()=>J("day"),className:"mr-2 w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2"}),"Apply changes to"," ",(0,O.jsx)("p",{children:(0,O.jsx)("span",{className:"font-bold ml-1",children:"this day only "})})]})]}),(0,O.jsx)("div",{className:"flex justify-end mt-5",children:(0,O.jsx)("button",{onClick:()=>Ze||gt?null:Rn(),disabled:Ze,className:"min-w-[176px] min-h-[30px] inline-flex items-center justify-center border border-transparent bg-primary text-sm font-medium text-white shadow-sm hover:bg-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 sm:w-auto",children:Ze?"Saving...":"Save"})})]})]})}),ue&&(0,O.jsx)(nn,{modalIsOpenParent:ue,setIsOpenParent:N,data:{menuInfo:S,menuInfo1:U,allergens:jn,dietary:Bn,stationName:j,stationImage:(Er=(Or=t==null?void 0:t.station_name)==null?void 0:Or.station_image_1)==null?void 0:Er.id,plateImg:(I==null?void 0:I.img)!==void 0?{id:I==null?void 0:I.img,showType:((Nr=I==null?void 0:I.img)==null?void 0:Nr.length)<50?"id":"base64"}:t==null?void 0:t.app_resultant_image,RecipePlateImg:(Ir=(Tr=t==null?void 0:t.recipe_id)==null?void 0:Tr.app_resultant_image)==null?void 0:Ir.id,stationId:W==null?void 0:W.stationId,locationId:(Ar=(kr=i==null?void 0:i.currentUser)==null?void 0:kr.selected_locations)==null?void 0:Ar.id,stationUniqueId:W==null?void 0:W.uniqueId},calorie:$e,co2:Ve,isAdminUser:!1})]})}),In=pi;var Q=ge(Be()),hi=Se.default.forwardRef(({station:e,stationId:r,editContent:n,existingTableData:t,indexValue:i,locationId:a,stationColor:u,bottomLine:y,preventDouble:g},E)=>{var z,F,J,U,ce,C,Re,Ce,Ee,De,He,Je,pt,ht,mt,he,We,me,Ue,Ze,Me,gt,lt,Le,vt,st,yt,$e,Ve,_t,ot,bt,xt,wt,St,Ot,Et,Nt,Tt,It,at,ct;let p=t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})?t==null?void 0:t.filter(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})[0]:{},[_,b]=(0,Se.useState)(t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})?(J=(F=(z=p==null?void 0:p.recipe_id)==null?void 0:z.allergens_list)==null?void 0:F.filter(c=>c.Allergens_id!=null).map(c=>{var R;return(R=c==null?void 0:c.Allergens_id)==null?void 0:R.id}))!=null?J:[]:[]),[h,s]=(0,Se.useState)(t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})?(C=(ce=(U=p==null?void 0:p.recipe_id)==null?void 0:U.dietary_list)==null?void 0:ce.filter(c=>c.Dietary_id!=null).map(c=>{var R;return(R=c==null?void 0:c.Dietary_id)==null?void 0:R.id}))!=null?C:[]:[]),[o,v]=(0,Se.useState)(!1),[T,k]=(0,Se.useState)(!1),[f,W]=(0,Se.useState)(t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})&&(Ce=(Re=p==null?void 0:p.recipe_id)==null?void 0:Re.menu_info)!=null?Ce:""),[j,oe]=(0,Se.useState)(t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})&&(De=(Ee=p==null?void 0:p.recipe_id)==null?void 0:Ee.menu_info_1)!=null?De:""),[L,ee]=(0,Se.useState)(t.some(c=>{var R;return((R=c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})?{calories:((He=p==null?void 0:p.recipe_id)==null?void 0:He.total_calories)!=null?(pt=Number((Je=p==null?void 0:p.recipe_id)==null?void 0:Je.total_calories))==null?void 0:pt.toFixed(2):null,co2:((ht=p==null?void 0:p.recipe_id)==null?void 0:ht.total_calories)!=null?(he=Number((mt=p==null?void 0:p.recipe_id)==null?void 0:mt.total_co2))==null?void 0:he.toFixed(2):null}:{calories:null,co2:null}),[Y,ue]=(0,Se.useState)(t.some(c=>{var R;return((R=c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})?(Ue=(me=(We=p==null?void 0:p.recipe_id)==null?void 0:We.ingredients_list)==null?void 0:me.filter(c=>(c==null?void 0:c.new_climate_db)!=null).map((c,R)=>{var je;return{name:(je=c==null?void 0:c.new_climate_db)==null?void 0:je.name,Value2:c==null?void 0:c.unit,item:c,Item1:c==null?void 0:c.new_climate_db,IndexId:R,prev1:c==null?void 0:c.new_climate_db,prev2:c==null?void 0:c.unit}}))!=null?Ue:[]:[]),[N,$]=(0,Se.useState)(t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})&&(Ze=p==null?void 0:p.portions_produced)!=null?Ze:""),[de,Oe]=(0,Se.useState)(t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})&&(Me=p==null?void 0:p.portions_sold)!=null?Me:""),G=100,_e=14,ne=8;(0,Se.useEffect)(()=>{(j==null?void 0:j.length)>G&&oe(j==null?void 0:j.substring(0,G))},[j==null?void 0:j.length]);let be=c=>{_.indexOf(c)==-1?(_==null?void 0:_.length)<_e&&b([..._,c]):b(_==null?void 0:_.filter(R=>R!=c))},Ne=c=>{h.indexOf(c)==-1?(h==null?void 0:h.length)<ne&&s([...h,c]):s(h==null?void 0:h.filter(R=>R!=c))};(0,Se.useImperativeHandle)(E,()=>({getSelectedMenuItems:()=>_,getSelectedDietaryItems:()=>h,getMenuInfo:()=>f==null?void 0:f.trim(),getTranslatedMenuInfo:()=>j==null?void 0:j.trim(),getMenuId:()=>p==null?void 0:p.id,getTotalCount:()=>{var c;return(c=f==null?void 0:f.trim())==null?void 0:c.length},getTranslatedMenuInfoTotalCount:()=>{var c;return(c=j==null?void 0:j.trim())==null?void 0:c.length},getErrorStatus:()=>{var c,R;return((c=f==null?void 0:f.trim())==null?void 0:c.length)>0&&((R=j==null?void 0:j.trim())==null?void 0:R.length)===0?!0:o}}));let we=(gt=e==null?void 0:e.station_name_translation)==null?void 0:gt.filter(c=>(c==null?void 0:c.location_id)===a),x=(Le=(lt=we==null?void 0:we[0])==null?void 0:lt.name)!=null&&Le.length?(vt=we==null?void 0:we[0])==null?void 0:vt.name:e==null?void 0:e.station_name,S=(yt=(st=p==null?void 0:p.station_name)==null?void 0:st.station_name_translation)==null?void 0:yt.filter(c=>(c==null?void 0:c.location_id)===a),q=(Ve=($e=S==null?void 0:S[0])==null?void 0:$e.name)!=null&&Ve.length?(_t=we==null?void 0:we[0])==null?void 0:_t.name:(ot=p==null?void 0:p.station_name)==null?void 0:ot.station_name,B=()=>{g!=!0&&k(!0)},D=()=>(0,Q.jsxs)("h2",{className:`text-black uppercase font-normal ${(e==null?void 0:e.is_not_main_station)===!0&&(e==null?void 0:e.is_dressings)==!1?"xs-subTitle text-[12px]":""} ${(e==null?void 0:e.is_dressings)==!0?"xs-subTitle text-[12px]":""}`,children:[t.some(c=>{var R;return((R=c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})?q:x,(e==null?void 0:e.is_not_main_station)===!0?" DK":(e==null?void 0:e.is_parent_station)===!0?"":" DK"]}),K=c=>(c==!1?(e==null?void 0:e.is_parent_station)===!1:!0)&&(0,Q.jsxs)("h2",{className:`text-black uppercase font-normal ${(e==null?void 0:e.is_not_main_station)===!0&&(e==null?void 0:e.is_dressings)==!1?"xs-subTitle text-[12px]":""} ${(e==null?void 0:e.is_dressings)==!0?"xs-subTitle text-[12px]":""}`,children:[t.some(R=>{var je;return((je=R.station_name)==null?void 0:je.id)==(e==null?void 0:e.id)})?q:x,(e==null?void 0:e.is_not_main_station)===!0?" EN":(e==null?void 0:e.is_parent_station)===!0?"":" EN"]}),X=t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})?q:x,I=((bt=f==null?void 0:f.trim())==null?void 0:bt.length)>0||((xt=j==null?void 0:j.trim())==null?void 0:xt.length)>0;return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)("div",{className:`flex flex-row lg:gap-8 md:gap-5 ${y?"border-b border-b-[#D0D0D0] mb-5 pb-6":""}`,children:[(0,Q.jsxs)("div",{className:"card w-1/3 pointer-events-none",children:[(0,Q.jsxs)("div",{className:"card col-span-12 md:col-span-12 lg:col-span-4 mb-4",children:[(0,Q.jsx)("div",{className:"mb-2",children:(0,Q.jsxs)("h2",{className:`text-black font-normal uppercase ${(e==null?void 0:e.is_not_main_station)===!0&&(e==null?void 0:e.is_dressings)==!1?"xs-subTitle text-[12px]":""} ${(e==null?void 0:e.is_dressings)==!0?"xs-subTitle text-[12px]":""}`,children:[X,(e==null?void 0:e.is_not_main_station)===!0?" DK":(e==null?void 0:e.is_parent_station)===!0?"":" DK"]})}),(e==null?void 0:e.is_parent_station)!==!0?(0,Q.jsxs)("div",{className:`border bg-white relative border-${(f==null?void 0:f.length)<=G?"gray":"red"}-300 border-l-8 border-l-[#B6D989] px-3 pl-2 py-2`,style:{borderLeftColor:(St=u[i])!=null?St:(wt=u==null?void 0:u.slice(-1))==null?void 0:wt[0],borderLeftWidth:"6px"},children:[(0,Q.jsx)(it,{lang:!0,value:f,setValue:W,setAllergens:b,setDietary:s,setIngredient:ue}),(0,Q.jsxs)("span",{className:"block text-xs text-[#AAA8A8] font-medium",children:[f==null?void 0:f.length,"/",G," characters"]})]}):null]}),(0,Q.jsxs)("div",{className:"card col-span-12 md:col-span-12 lg:col-span-4 ",children:[(0,Q.jsx)("div",{className:"mb-2",children:(e==null?void 0:e.is_parent_station)===!1&&(0,Q.jsxs)("h2",{className:`text-black uppercase font-normal ${(e==null?void 0:e.is_not_main_station)===!0&&(e==null?void 0:e.is_dressings)==!1?"xs-subTitle text-[12px]":""} ${(e==null?void 0:e.is_dressings)==!0?"xs-subTitle text-[12px]":""}`,children:[t!=null&&t.some(c=>{var R;return((R=c==null?void 0:c.station_name)==null?void 0:R.id)==(e==null?void 0:e.id)})?q:x,(e==null?void 0:e.is_not_main_station)===!0?" EN":(e==null?void 0:e.is_parent_station)===!0?"":" EN"]})}),(e==null?void 0:e.is_parent_station)!==!0?(0,Q.jsxs)("div",{className:`border bg-white relative border-${(j==null?void 0:j.length)<=G?"gray":"red"}-300 border-l-8 border-l-[#B6D989] px-3 pl-2 py-2`,style:{borderLeftColor:(Et=u[i])!=null?Et:(Ot=u==null?void 0:u.slice(-1))==null?void 0:Ot[0],borderLeftWidth:"6px"},children:[(0,Q.jsx)(it,{lang:!1,value:j,setValue:j,setAllergens:b,setDietary:s,setIngredient:ue}),(0,Q.jsxs)("span",{className:"block text-xs text-[#AAA8A8] font-medium",children:[j==null?void 0:j.length,"/",G," characters"]})]}):null]})]}),(0,Q.jsxs)("div",{className:"card w-1/3 lg:px-[15px] md:px-[5px] pointer-events-none relative",children:[(e==null?void 0:e.is_parent_station)!==!0?(0,Q.jsx)("div",{className:"mb-2",children:(0,Q.jsx)("h2",{className:"text-black capitalize font-semibold text-sm",children:"Allergener"})}):null,(e==null?void 0:e.is_parent_station)!==!0?(0,Q.jsx)("div",{className:"list-items",children:(0,Q.jsx)("ul",{className:"lists flex flex-wrap gap-2 grid-cols-8 sm:grid-cols-6 md:grid-cols-8 1xl:grid-cols-6",children:(Tt=(Nt=n==null?void 0:n.getAllAllergens)==null?void 0:Nt.data)==null?void 0:Tt.map((c,R)=>(0,Q.jsx)("li",{onClick:()=>be(c==null?void 0:c.id),className:`list cursor-pointer text-center text-xs px-3 py-1 rounded-[24px] border ${_!=null&&_.some(je=>je==(c==null?void 0:c.id))?"bg-primary text-white":null} border-primary col-span-4 sm:col-span-2 md:col-span-1 lg:col-span-2 1xl:col-span-1 font-normal`,children:c==null?void 0:c.name},R))})}):null,(L==null?void 0:L.calories)!==null&&(L==null?void 0:L.calories)>0&&(0,Q.jsx)("div",{className:"co2-section bg-[#E1EEDE] text-xs text-black rounded-[24px] py-1 px-4 inline-block mt-[0.75rem]",children:(0,Q.jsxs)("div",{className:"calorie font-medium",children:["Kalorier: ",L==null?void 0:L.calories," kcal"]})}),(_==null?void 0:_.length)>=_e&&(0,Q.jsx)("div",{className:"text-red-500 text-sm text-left mt-2",children:`*Maximum ${_e} allergener are allowed.`})]}),(0,Q.jsxs)("div",{className:"card w-1/3 lg:px-[15px] md:px-[5px] pointer-events-none relative",children:[(e==null?void 0:e.is_parent_station)!==!0?(0,Q.jsx)("div",{className:"mb-2",children:(0,Q.jsx)("h2",{className:"text-black capitalize font-semibold text-sm",children:Rt})}):null,(e==null?void 0:e.is_parent_station)!==!0?(0,Q.jsx)("div",{className:"list-items",children:(0,Q.jsx)("ul",{className:"lists flex flex-wrap gap-2 grid-cols-8 sm:grid-cols-6 md:grid-cols-8 1xl:grid-cols-6",children:(at=(It=n==null?void 0:n.getAllDietary)==null?void 0:It.data)==null?void 0:at.map((c,R)=>(0,Q.jsx)("li",{onClick:()=>Ne(c==null?void 0:c.id),className:`list cursor-pointer text-center text-xs px-3 py-1 rounded-[24px] border ${h!=null&&h.some(je=>je==(c==null?void 0:c.id))?"bg-primary text-white":null} border-primary col-span-4 sm:col-span-2 md:col-span-1 lg:col-span-2 1xl:col-span-1 font-normal`,children:c==null?void 0:c.name},R))})}):null,(L==null?void 0:L.co2)!==null&&(L==null?void 0:L.co2)>0&&(0,Q.jsx)("div",{className:"co2-section bg-[#E1EEDE] text-xs text-black rounded-[24px] py-1 px-4 inline-block mt-[0.75rem]",children:(0,Q.jsxs)("div",{className:"calorie font-medium",children:["CO2: ",L==null?void 0:L.co2," kg"]})}),(h==null?void 0:h.length)>=ne&&(0,Q.jsx)("div",{className:"text-red-500 text-sm text-left mt-2",children:`*Maximum ${ne} kostpr\xE6ferencer are allowed.`})]}),(e==null?void 0:e.is_parent_station)!==!0&&(0,Q.jsx)("button",{className:`w-[120px] self-start p-1 rounded-md text-primary text-sm font-medium cursor-pointer ${p!=null&&p.id?" bg-[#F1F1F1]":" bg-[#E3E3AD]"}`,onClick:()=>(e==null?void 0:e.is_parent_station)!==!0&&B(),children:p!=null&&p.id?"Edit Recipe":"Add Recipe"})]}),T?(0,Q.jsx)(In,{ref:E,station:p,editContent:n,existingTableData:t,indexValue:i,stationColor:u,setIsOpenv:k,EnTitle:K,DkTitle:D,dkMenu:f,setDkMenu:W,enMenu:j,setEnMenu:oe,allergensList:_,setAllergensList:b,dietaryList:h,setDietaryList:s,ingredientsList:Y,setIngredientsList:ue,portionsProducedValue:N,setPortionsProducedValue:$,portionsSoldValue:de,setPortionsSoldValue:Oe,totalCalorie:L,setTotalCalorie:ee,menuId:{menu:p==null?void 0:p.id,recipeId:(ct=p==null?void 0:p.recipe_id)==null?void 0:ct.id},stationId:r,stationName:X},p==null?void 0:p.id):null]})}),Qt=hi;var mi=ge($n());var kn=ge(Vn());var fe=ge(Be());function gi(){return{title:"Edit Menu of the day"}}function An({params:e}){var Y,ue;let r=Fr(),n=(Y=r==null?void 0:r.getAllStations)==null?void 0:Y.map(N=>N.tagColor),[t,i]=(0,Pe.useState)(!0),[a,u]=(0,Pe.useState)(!0),[y,g]=(0,Pe.useState)(!0),[E,p]=(0,Pe.useState)(!1),[_,b]=(0,Pe.useState)(!0),[h,s]=(0,Pe.useState)(!1),o=(ue=r==null?void 0:r.res)==null?void 0:ue.data,v=(0,Pe.useRef)([]),T=(0,Pe.useRef)(null),k="EEEE",[f,W]=(0,Pe.useState)(r==null?void 0:r.getAllStations),j=async()=>{let N=await ve.items("Locations").readByQuery({fields:["screen_ids"],filter:{id:{_eq:r==null?void 0:r.locationId}}});setTimeout(async()=>{var $,de,Oe,G,_e,ne;if(((Oe=(de=($=N==null?void 0:N.data)==null?void 0:$[0])==null?void 0:de.screen_ids)==null?void 0:Oe.length)>0){let be=(ne=(_e=(G=N==null?void 0:N.data)==null?void 0:G[0])==null?void 0:_e.screen_ids)==null?void 0:ne.split(",");await fetch(Yr,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(be)}).then(Ne=>{}).catch(Ne=>{console.log(Ne)})}await fetch(Xr,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({files:{files:[`${Wr}/`]}})}).then(be=>{}).catch(be=>{console.log(be)})},3e3)},oe=N=>{localStorage.setItem("LastWacthedWeek",r.date)};(0,Pe.useEffect)(()=>{localStorage.setItem("LastWacthedWeek",r.date);let N=localStorage.getItem("MenuSave");(N==null?void 0:N.length)>0&&(N==="create"?Xe.success("The record has been saved successfully"):N==="edit"&&Xe.success("The record has been updated successfully"),localStorage.removeItem("MenuSave"),j());var $=!1;let de=setInterval(()=>{var Oe,G,_e;for(let ne=0;ne<(f==null?void 0:f.length);ne++)if(((Oe=v==null?void 0:v.current[ne])==null?void 0:Oe.getTotalCount())>0&&($=!0,((G=v==null?void 0:v.current[ne])==null?void 0:G.getTranslatedMenuInfoTotalCount())>0?(clearInterval(de),b(!1)):!_&&b(!0)),(_e=v==null?void 0:v.current[ne])!=null&&_e.getErrorStatus()){clearInterval(de),b(!1),Xe.error("Oops!!! Something went wrong in the google translation");break}$||(clearInterval(de),b(!1))},200);return()=>clearInterval(de)},[]);let L=[],ee=[];return(0,fe.jsxs)("div",{children:[(0,fe.jsx)(en,{title:!0,logout:i,noLeftLogo:!1}),(0,fe.jsx)("div",{className:"main-content-area",children:(0,fe.jsxs)("div",{className:"page__wrap justify-center items-center px-5 py-4 lg:px-10 p-10 pt-7 bg-[#F8F8F8]",children:[(0,fe.jsxs)("div",{className:"head pt-9 pb-5 text-center text-primary",children:[(0,fe.jsxs)("h1",{className:"text-lg font-medium",children:[Vt(new Date(r.date),k)," ",Vt(new Date(r.date),"MM/dd/yyyy")]}),(0,fe.jsx)("p",{className:"mt-1 text-sm font-normal",children:"Menu of the day"})]}),(0,fe.jsx)("div",{className:"relative w-full bg-black ",children:(0,fe.jsx)("div",{children:(0,fe.jsx)("button",{className:"absolute flex bottom-0 left-0 mb-3",children:(0,fe.jsx)(Br,{className:"flex-1 d-flex justify-items-end",to:{pathname:"/",state:{id:"test"}},onClick:()=>oe(),children:(0,fe.jsxs)("span",{className:"w-full min-w-[112px] py-1.5 flex justify-start items-center text-primary font-medium text-sm rounded  focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[(0,fe.jsx)("i",{className:"ri-arrow-left-line mr-1"}),"  Go Back"]})})})})}),(0,fe.jsxs)("div",{className:" relative",children:[_?(0,fe.jsx)("div",{style:{flex:1,justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:(0,fe.jsx)(ln,{})}):null,(0,fe.jsx)("div",{style:{display:_?"none":"contents"},children:f==null?void 0:f.map((N,$)=>{var ne,be,Ne,we,x,S,q,B,D,K,X,I,z,F,J,U,ce;let de=(Ne=(be=(ne=r==null?void 0:r.currentUser)==null?void 0:ne.selected_locations)==null?void 0:be.allowed_stations)==null?void 0:Ne.map(C=>{var Re,Ce;return((Re=C==null?void 0:C.Stations_id)==null?void 0:Re.is_not_main_station)!==!0&&((Ce=C==null?void 0:C.Stations_id)==null?void 0:Ce.station_unique_id)}),Oe=de==null?void 0:de.filter(C=>C===(N==null?void 0:N.station_unique_id)&&(C==null?void 0:C.is_not_main_station)!==!0),G=new Array(de)[0];if((N==null?void 0:N.station_unique_id)===((we=$r)==null?void 0:we.toString())&&(G==null?void 0:G.includes((x=At)==null?void 0:x.toString()))||(N==null?void 0:N.station_unique_id)===((S=Vr)==null?void 0:S.toString())&&(G==null?void 0:G.includes((q=At)==null?void 0:q.toString()))||(N==null?void 0:N.station_unique_id)===((B=qr)==null?void 0:B.toString())&&(G==null?void 0:G.includes((D=At)==null?void 0:D.toString()))||(N==null?void 0:N.station_unique_id)===((K=zr)==null?void 0:K.toString())&&(G==null?void 0:G.includes((X=Pt)==null?void 0:X.toString()))||(N==null?void 0:N.station_unique_id)===((I=Ur)==null?void 0:I.toString())&&(G==null?void 0:G.includes((z=Pt)==null?void 0:z.toString()))||(N==null?void 0:N.station_unique_id)===((F=Kr)==null?void 0:F.toString())&&(G==null?void 0:G.includes((J=Pt)==null?void 0:J.toString()))||Oe[0]){if(N==null||N.is_parent_station,(U=N==null?void 0:N.child_list)!=null&&U.length&&(L=[],ee=[],(ce=N==null?void 0:N.child_list)==null||ce.map(C=>L.push(C==null?void 0:C.related_Stations_id))),L!=null&&L.length&&(ee==null||ee.push({stationMenu:N,existingTableData:o,stationColor:n,index:$})),(N==null?void 0:N.is_not_main_station)==!1&&(N==null?void 0:N.is_parent_station)==!1)return(0,fe.jsx)("div",{className:"editmenuitem bg-white rounded-[10px] border border-[#E2E2E2] shadow-sm px-5 py-10 lg:px-10 mb-5",children:(0,fe.jsx)(Qt,{ref:C=>v.current[$]=C,station:N,editContent:r,existingTableData:o,indexValue:$,setOpen:u,setOpen2:g,locationId:r==null?void 0:r.locationId,stationColor:n,bottomLine:!1,preventDouble:E,stationId:{stationId:N==null?void 0:N.id,uniqueId:N==null?void 0:N.station_unique_id}})},$);if((L==null?void 0:L.length)+1==(ee==null?void 0:ee.length))return(0,fe.jsx)("div",{className:"editmenuitem bg-white rounded-[10px] border border-[#E2E2E2] shadow-sm px-5 py-10 lg:px-10 mb-5",children:ee==null?void 0:ee.map((C,Re)=>{var Ce,Ee,De,He;return(0,fe.jsx)(Qt,{ref:Je=>v.current[C==null?void 0:C.index]=Je,stationId:{stationId:(Ee=C==null?void 0:C.stationMenu)==null?void 0:Ee.id,uniqueId:(De=C==null?void 0:C.stationMenu)==null?void 0:De.station_unique_id},station:C==null?void 0:C.stationMenu,editContent:r,existingTableData:C==null?void 0:C.existingTableData,indexValue:C==null?void 0:C.index,setOpen:u,setOpen2:g,locationId:r==null?void 0:r.locationId,stationColor:C==null?void 0:C.stationColor,bottomLine:((He=C==null?void 0:C.stationMenu)==null?void 0:He.is_parent_station)!==!0&&Re<(ee==null?void 0:ee.length)-1,preventDouble:E},(Ce=C==null?void 0:C.stationMenu)==null?void 0:Ce.id)})},$)}else return null})})]})]})}),(0,fe.jsx)(tn,{})]})}export{An as default,gi as meta};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
