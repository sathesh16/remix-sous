{
  "version": 3,
  "sources": ["../../../../app/routes/rooms/create.jsx"],
  "sourcesContent": ["import { Form, useNavigate, useLoaderData } from \"@remix-run/react\";\nimport React, { useState } from \"react\";\nimport { getDirectusClient } from \"~/lib/directus\";\nimport { directusLoaderLink } from \"~/utils/constants.js\";\nimport HeaderFile from \"~/components/HeaderFile\";\nimport { toast } from \"react-toastify\";\nimport Footer from \"~/components/Footer\";\nimport { sessionStorage } from \"~/services/session.server\";\nimport { authLogout, isLoggedIn } from \"~/utils/db.server\";\nimport { ISS_DENMARK_HQ } from \"~/utils/constants\";\nimport Select from \"react-select\";\nimport { useHydrated } from \"remix-utils\";\nexport const action = async ({ request }) => {\n  await authLogout(request);\n};\nexport const loader = async ({ request }) => {\n  await isLoggedIn(request);\n  const session = await sessionStorage.getSession(\n    request.headers.get(\"Cookie\")\n  );\n  var sessionkey = session.get(\"sessionKey\");\n  const directus = await getDirectusClient(sessionkey);\n  const current = await directus.users.me.read({ fields: [\"*.*\"] });\n  return { location_id: current?.selected_locations?.id };\n};\n\nexport function meta() {\n  return { title: \"Create Rooms\" };\n}\n\nexport default function RoomsCreate() {\n  const { location_id } = useLoaderData();\n  const [auth, setAuth] = useState(true);\n  const navigate = useNavigate();\n  const [room, setRoom] = useState(\"\");\n  const [screenA, setScreenA] = useState();\n  const [screenB, setScreenB] = useState();\n  const [buttonTrigger, setButtonTrigger] = React.useState(false);\n  const roomRef = React.useRef(null);\n  const isHydrated = useHydrated();\n\n  React.useEffect(() => {\n    const element = document.getElementById(\"submitId\");\n    element.addEventListener(\"click\", function () {\n      if (!buttonTrigger) {\n        if (!!room?.trim() && !!screenA && !!screenB) {\n          if (document.activeElement !== roomRef.current) {\n            element.style.pointerEvents = \"none\";\n            setButtonTrigger(true);\n          }\n        }\n      }\n    });\n    return () => {\n      element.removeEventListener(\"click\", function () {\n        setButtonTrigger(false);\n      });\n    };\n  }, [room,screenA,screenB]);\n  const createHandle = async (e) => {\n    const directus = directusLoaderLink;\n    if (room?.trim()?.length > 0) {\n      if (screenA) {\n        if (screenB) {\n          await directus\n            .items(\"Rooms\")\n            .createOne({\n              name: room,\n              screen_a: screenA?.direction,\n              screen_b: screenB?.direction,\n            })\n            .then((res) => {\n              navigate(\"/rooms/manage\");\n              toast.success(\" Created successfully\");\n            })\n            .catch((err) => {\n              navigate(\".\", { replace: true });\n              console.log(err);\n              toast.error(err);\n            });\n        } else {\n          toast.error(\"Select Screen-B direction\");\n        }\n      } else {\n        toast.error(\"Select Screen-A direction\");\n      }\n    } else {\n      toast.error(\"Room name is required\");\n    }\n  };\n  const directionData = [\n    { name: \"North\", id: 1, direction: \"Up\" },\n    { name: \"South\", id: 2, direction: \"Down\" },\n    { name: \"West\", id: 3, direction: \"Left\" },\n    { name: \"East\", id: 4, direction: \"Right\" },\n  ];\n\n  const RepeatSelection = (prop) => {\n    const onChangeHandle = (e) => {\n      prop === false ? setScreenA(e) : setScreenB(e);\n      return \"\";\n    };\n    return (\n      <div>\n        {isHydrated ? (\n          <Select\n            id={\"rooms\"}\n            instanceId={prop === false ? 1 : 2}\n            classNamePrefix=\"cursor-pointer react-select\"\n            className=\"screen-direction-create react-select-container mt-1 block w-full rounded-md border border-gray-300 py-2 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium focus:border-primary focus:outline-none focus:ring-primary sm:text-sm\"\n            maxMenuHeight={250}\n            onChange={(e) => onChangeHandle(e)}\n            isSearchable={false}\n            components={{ IndicatorSeparator: () => null }}\n            value={prop === false ? screenA : screenB}\n            options={directionData}\n            getOptionLabel={(option) => (\n              <i\n                className={`ri-arrow-${option?.direction\n                  ?.trim()\n                  ?.toLowerCase()}-line`}\n              ></i>\n            )}\n            getOptionValue={(option) => option}\n            styles={{\n              control: (baseStyles) => ({\n                ...baseStyles,\n                border: \"none\",\n                boxShadow: \"none\",\n              }),\n            }}\n          />\n        ) : null}\n      </div>\n    );\n  };\n  return (\n    <div className=\"page-content\">\n      <HeaderFile\n        title\n        logout={setAuth}\n        noLeftLogo={ISS_DENMARK_HQ?.includes(location_id) ? true : false}\n      />\n      <div className=\"main-content-area\">\n        <div className=\"page__wrap w-full flex justify-center items-center mh-145\">\n          <div className=\"border p-6 rounded-md border-gray-300 form-area c-allergens\">\n            <Form onSubmit={(e) => createHandle(e)}>\n              <div className=\"max-w-[400px] w-full\">\n                <div className=\"flex justify-between items-center gap-5\">\n                  <div className=\"flex justify-start items-center gap-3\">\n                    <div>\n                      <button\n                        type=\"button\"\n                        title=\"Backward\"\n                        onClick={() => navigate(-1)}\n                        className=\"w-10 h-10 min-h-[40px] min-w-[40px] inline-flex items-center justify-center rounded-full border border-gray-100 bg-white  text-sm font-medium text-primary shadow-md hover:bg-gray-50 focus:outline-none focus:shadow-md sm:w-auto\"\n                      >\n                        <span>\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            strokeWidth=\"3\"\n                            stroke=\"currentColor\"\n                            className=\"w-5 h-5\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              d=\"M15.75 19.5L8.25 12l7.5-7.5\"\n                            />\n                          </svg>\n                        </span>\n                      </button>\n                    </div>\n                    <div>\n                      <h1 className=\"text-xl font-semibold text-primary\">\n                        Create a Room\n                      </h1>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-between items-center gap-5\">\n                    <button\n                      type=\"submit\"\n                      id=\"submitId\"\n                      title=\"Save\"\n                      className=\"w-10 h-10 min-w-[40px] min-h-[40px] inline-flex items-center justify-center rounded-full border border-transparent bg-primary text-sm font-medium text-white shadow-sm hover:bg-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 sm:w-auto\"\n                    >\n                      <span>\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                          strokeWidth=\"2\"\n                          stroke=\"currentColor\"\n                          className=\"w-5 h-5\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M4.5 12.75l6 6 9-13.5\"\n                          />\n                        </svg>\n                      </span>\n                    </button>\n                  </div>\n                </div>\n                <div className=\"mt-6 block\">\n                  <div className=\"space-y-6 bg-white py-6\">\n                    <div className=\"grid grid-cols-6 gap-6\">\n                      <div className=\"col-span-6\">\n                        <label\n                          htmlFor=\"room-name\"\n                          className=\"block text-sm font-medium text-gray-700\"\n                        >\n                          Name<span className=\"text-red-600 text-base\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"room-name\"\n                          id=\"user-name\"\n                          placeholder=\"Room Name\"\n                          required\n                          ref={roomRef}\n                          value={room}\n                          onChange={(e) => setRoom(e.target.value)}\n                          autoComplete=\"given-name\"\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm placeholder:text-gray-400 placeholder:!text-sm placeholder:font-medium focus:border-primary  focus:outline-none focus:ring-primary sm:text-sm\"\n                        />\n                      </div>\n                      <div className=\"col-span-6\">\n                        <label\n                          htmlFor=\"direction-name\"\n                          className=\"block text-sm font-medium text-gray-700\"\n                        >\n                          Screen A Direction\n                          <span className=\"text-red-600 text-base\">*</span>\n                        </label>\n                        {RepeatSelection(false)}\n                      </div>\n                      <div className=\"col-span-6\">\n                        <label\n                          htmlFor=\"direction-name\"\n                          className=\"block text-sm font-medium text-gray-700\"\n                        >\n                          Screen B Direction\n                          <span className=\"text-red-600 text-base\">*</span>\n                        </label>\n                        {RepeatSelection(true)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Form>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n"],
  "mappings": "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",
  "names": ["import_react", "React", "_a"]
}
